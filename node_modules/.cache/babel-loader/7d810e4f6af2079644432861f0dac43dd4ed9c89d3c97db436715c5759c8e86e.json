{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Majayjay Tourism Circuit\\\\src\\\\components\\\\RoutePlanner.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RoutePlanner() {\n  _s();\n  const navigate = useNavigate();\n  const [pois, setPois] = useState([]);\n  const [user, setUser] = useState(null);\n  const [userLocation, setUserLocation] = useState(null);\n  const [recommendedPois, setRecommendedPois] = useState([]);\n  useEffect(() => {\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n    setUser(storedUser);\n    fetch(\"http://localhost:5000/api/pois\").then(res => res.json()).then(data => setPois(data));\n    if (\"geolocation\" in navigator) {\n      navigator.geolocation.getCurrentPosition(pos => setUserLocation({\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude\n      }), () => setUserLocation({\n        lat: 14.1461,\n        lng: 121.5012\n      }) // fallback\n      );\n    } else setUserLocation({\n      lat: 14.1461,\n      lng: 121.5012\n    });\n  }, []);\n  useEffect(() => {\n    if (!user) return;\n    fetch(\"http://127.0.0.1:5000/api/recommend\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        user_id: user.id\n      })\n    }).then(res => res.json()).then(data => setRecommendedPois(data)).catch(err => console.error(\"Failed to fetch recommendations:\", err));\n  }, [user]);\n  const planRoute = () => {\n    if (!userLocation) return alert(\"Waiting for location...\");\n    navigate(\"/routedetails\", {\n      state: {\n        startPoint: userLocation,\n        filteredPois: pois,\n        transportMode: \"driving-car\"\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\",\n      marginTop: 40\n    },\n    children: [recommendedPois.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 30,\n        textAlign: \"left\",\n        padding: \"0 20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          color: \"#1976d2\",\n          marginBottom: 12\n        },\n        children: \"Places You Might Like\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), recommendedPois.map(poi => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16,\n          padding: 12,\n          border: \"1px solid #eee\",\n          borderRadius: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: poi.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: poi.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this)]\n      }, poi.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: planRoute,\n      style: {\n        padding: \"14px 28px\",\n        background: \"#1976d2\",\n        color: \"#fff\",\n        border: \"none\",\n        borderRadius: 10,\n        fontSize: 18,\n        cursor: \"pointer\",\n        boxShadow: \"0 4px 12px rgba(0,0,0,0.2)\"\n      },\n      children: \"Plan My Route\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(RoutePlanner, \"wRGHk/7TGBbSprAF1B1jEB7xCew=\", false, function () {\n  return [useNavigate];\n});\n_c = RoutePlanner;\nvar _c;\n$RefreshReg$(_c, \"RoutePlanner\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsxDEV","_jsxDEV","RoutePlanner","_s","navigate","pois","setPois","user","setUser","userLocation","setUserLocation","recommendedPois","setRecommendedPois","storedUser","JSON","parse","localStorage","getItem","fetch","then","res","json","data","navigator","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","method","headers","body","stringify","user_id","id","catch","err","console","error","planRoute","alert","state","startPoint","filteredPois","transportMode","style","textAlign","marginTop","children","length","marginBottom","padding","color","fileName","_jsxFileName","lineNumber","columnNumber","map","poi","border","borderRadius","name","description","onClick","background","fontSize","cursor","boxShadow","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/components/RoutePlanner.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function RoutePlanner() {\r\n  const navigate = useNavigate();\r\n  const [pois, setPois] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [userLocation, setUserLocation] = useState(null);\r\n  const [recommendedPois, setRecommendedPois] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    setUser(storedUser);\r\n\r\n    fetch(\"http://localhost:5000/api/pois\")\r\n      .then((res) => res.json())\r\n      .then((data) => setPois(data));\r\n\r\n    if (\"geolocation\" in navigator) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (pos) =>\r\n          setUserLocation({ lat: pos.coords.latitude, lng: pos.coords.longitude }),\r\n        () => setUserLocation({ lat: 14.1461, lng: 121.5012 }) // fallback\r\n      );\r\n    } else setUserLocation({ lat: 14.1461, lng: 121.5012 });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    fetch(\"http://127.0.0.1:5000/api/recommend\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ user_id: user.id }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => setRecommendedPois(data))\r\n      .catch((err) => console.error(\"Failed to fetch recommendations:\", err));\r\n  }, [user]);\r\n\r\n  const planRoute = () => {\r\n    if (!userLocation) return alert(\"Waiting for location...\");\r\n    navigate(\"/routedetails\", {\r\n      state: { startPoint: userLocation, filteredPois: pois, transportMode: \"driving-car\" },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: \"center\", marginTop: 40 }}>\r\n      {recommendedPois.length > 0 && (\r\n        <div style={{ marginBottom: 30, textAlign: \"left\", padding: \"0 20px\" }}>\r\n          <h2 style={{ color: \"#1976d2\", marginBottom: 12 }}>Places You Might Like</h2>\r\n          {recommendedPois.map((poi) => (\r\n            <div key={poi.id} style={{ marginBottom: 16, padding: 12, border: \"1px solid #eee\", borderRadius: 8 }}>\r\n              <strong>{poi.name}</strong>\r\n              <p>{poi.description}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <button\r\n        onClick={planRoute}\r\n        style={{\r\n          padding: \"14px 28px\",\r\n          background: \"#1976d2\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: 10,\r\n          fontSize: 18,\r\n          cursor: \"pointer\",\r\n          boxShadow: \"0 4px 12px rgba(0,0,0,0.2)\",\r\n        }}\r\n      >\r\n        Plan My Route\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}