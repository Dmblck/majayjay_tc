{"ast":null,"code":"const ORS_API_KEY = process.env.REACT_APP_ORS_KEY;\nexport async function getRouteInfo(start, end, mode = \"driving-car\") {\n  const res = await fetch(`https://api.openrouteservice.org/v2/directions/${mode}`, {\n    method: \"POST\",\n    headers: {\n      Authorization: ORS_API_KEY,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      coordinates: [start, end]\n    })\n  });\n  if (!res.ok) throw new Error(\"Routing failed\");\n  const data = await res.json();\n  return {\n    coords: data.routes[0].geometry,\n    distance: data.routes[0].summary.distance\n  };\n}\nexport async function snapToRoad(poi, profile = \"driving-car\") {\n  try {\n    const res = await fetch(`https://api.openrouteservice.org/v2/snap/${profile}`, {\n      method: \"POST\",\n      headers: {\n        Authorization: ORS_API_KEY,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        coordinates: [[poi.lng, poi.lat]]\n      })\n    });\n    const data = await res.json();\n    if (data.snappedLocations && data.snappedLocations.length) {\n      const snapped = data.snappedLocations[0].location;\n      return {\n        lat: snapped[1],\n        lng: snapped[0]\n      };\n    }\n    return poi;\n  } catch {\n    return poi;\n  }\n}\nexport async function fetchRouteSegment(from, to, profile = \"driving-car\") {\n  if (!from || !to) return null;\n  const snappedFrom = await snapToRoad(from, profile);\n  const snappedTo = await snapToRoad(to, profile);\n  try {\n    var _data$features;\n    const res = await fetch(`https://api.openrouteservice.org/v2/directions/${profile}/geojson`, {\n      method: \"POST\",\n      headers: {\n        Authorization: ORS_API_KEY,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        coordinates: [[snappedFrom.lng, snappedFrom.lat], [snappedTo.lng, snappedTo.lat]],\n        preference: \"fastest\",\n        instructions: false\n      })\n    });\n    const data = await res.json();\n    if ((_data$features = data.features) !== null && _data$features !== void 0 && _data$features.length) {\n      return {\n        coords: data.features[0].geometry.coordinates.map(([lng, lat]) => [lat, lng]),\n        summary: data.features[0].properties.summary,\n        profile\n      };\n    }\n  } catch {\n    return null;\n  }\n  return null;\n}","map":{"version":3,"names":["ORS_API_KEY","process","env","REACT_APP_ORS_KEY","getRouteInfo","start","end","mode","res","fetch","method","headers","Authorization","body","JSON","stringify","coordinates","ok","Error","data","json","coords","routes","geometry","distance","summary","snapToRoad","poi","profile","lng","lat","snappedLocations","length","snapped","location","fetchRouteSegment","from","to","snappedFrom","snappedTo","_data$features","preference","instructions","features","map","properties"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/services/orsService.js"],"sourcesContent":["const ORS_API_KEY = process.env.REACT_APP_ORS_KEY;\r\n\r\nexport async function getRouteInfo(start, end, mode = \"driving-car\") {\r\n  const res = await fetch(`https://api.openrouteservice.org/v2/directions/${mode}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Authorization: ORS_API_KEY,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ coordinates: [start, end] }),\r\n  });\r\n\r\n  if (!res.ok) throw new Error(\"Routing failed\");\r\n  const data = await res.json();\r\n\r\n  return {\r\n    coords: data.routes[0].geometry,\r\n    distance: data.routes[0].summary.distance,\r\n  };\r\n}\r\n\r\nexport async function snapToRoad(poi, profile = \"driving-car\") {\r\n  try {\r\n    const res = await fetch(`https://api.openrouteservice.org/v2/snap/${profile}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: ORS_API_KEY,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ coordinates: [[poi.lng, poi.lat]] }),\r\n    });\r\n    const data = await res.json();\r\n    if (data.snappedLocations && data.snappedLocations.length) {\r\n      const snapped = data.snappedLocations[0].location;\r\n      return { lat: snapped[1], lng: snapped[0] };\r\n    }\r\n    return poi;\r\n  } catch {\r\n    return poi;\r\n  }\r\n}\r\n\r\nexport async function fetchRouteSegment(from, to, profile = \"driving-car\") {\r\n  if (!from || !to) return null;\r\n\r\n  const snappedFrom = await snapToRoad(from, profile);\r\n  const snappedTo = await snapToRoad(to, profile);\r\n\r\n  try {\r\n    const res = await fetch(`https://api.openrouteservice.org/v2/directions/${profile}/geojson`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: ORS_API_KEY,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        coordinates: [\r\n          [snappedFrom.lng, snappedFrom.lat],\r\n          [snappedTo.lng, snappedTo.lat],\r\n        ],\r\n        preference: \"fastest\",\r\n        instructions: false,\r\n      }),\r\n    });\r\n    const data = await res.json();\r\n    if (data.features?.length) {\r\n      return {\r\n        coords: data.features[0].geometry.coordinates.map(([lng, lat]) => [lat, lng]),\r\n        summary: data.features[0].properties.summary,\r\n        profile,\r\n      };\r\n    }\r\n  } catch {\r\n    return null;\r\n  }\r\n\r\n  return null;\r\n}\r\n"],"mappings":"AAAA,MAAMA,WAAW,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AAEjD,OAAO,eAAeC,YAAYA,CAACC,KAAK,EAAEC,GAAG,EAAEC,IAAI,GAAG,aAAa,EAAE;EACnE,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,kDAAkDF,IAAI,EAAE,EAAE;IAChFG,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACPC,aAAa,EAAEZ,WAAW;MAC1B,cAAc,EAAE;IAClB,CAAC;IACDa,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEC,WAAW,EAAE,CAACX,KAAK,EAAEC,GAAG;IAAE,CAAC;EACpD,CAAC,CAAC;EAEF,IAAI,CAACE,GAAG,CAACS,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;EAC9C,MAAMC,IAAI,GAAG,MAAMX,GAAG,CAACY,IAAI,CAAC,CAAC;EAE7B,OAAO;IACLC,MAAM,EAAEF,IAAI,CAACG,MAAM,CAAC,CAAC,CAAC,CAACC,QAAQ;IAC/BC,QAAQ,EAAEL,IAAI,CAACG,MAAM,CAAC,CAAC,CAAC,CAACG,OAAO,CAACD;EACnC,CAAC;AACH;AAEA,OAAO,eAAeE,UAAUA,CAACC,GAAG,EAAEC,OAAO,GAAG,aAAa,EAAE;EAC7D,IAAI;IACF,MAAMpB,GAAG,GAAG,MAAMC,KAAK,CAAC,4CAA4CmB,OAAO,EAAE,EAAE;MAC7ElB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACPC,aAAa,EAAEZ,WAAW;QAC1B,cAAc,EAAE;MAClB,CAAC;MACDa,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEC,WAAW,EAAE,CAAC,CAACW,GAAG,CAACE,GAAG,EAAEF,GAAG,CAACG,GAAG,CAAC;MAAE,CAAC;IAC5D,CAAC,CAAC;IACF,MAAMX,IAAI,GAAG,MAAMX,GAAG,CAACY,IAAI,CAAC,CAAC;IAC7B,IAAID,IAAI,CAACY,gBAAgB,IAAIZ,IAAI,CAACY,gBAAgB,CAACC,MAAM,EAAE;MACzD,MAAMC,OAAO,GAAGd,IAAI,CAACY,gBAAgB,CAAC,CAAC,CAAC,CAACG,QAAQ;MACjD,OAAO;QAAEJ,GAAG,EAAEG,OAAO,CAAC,CAAC,CAAC;QAAEJ,GAAG,EAAEI,OAAO,CAAC,CAAC;MAAE,CAAC;IAC7C;IACA,OAAON,GAAG;EACZ,CAAC,CAAC,MAAM;IACN,OAAOA,GAAG;EACZ;AACF;AAEA,OAAO,eAAeQ,iBAAiBA,CAACC,IAAI,EAAEC,EAAE,EAAET,OAAO,GAAG,aAAa,EAAE;EACzE,IAAI,CAACQ,IAAI,IAAI,CAACC,EAAE,EAAE,OAAO,IAAI;EAE7B,MAAMC,WAAW,GAAG,MAAMZ,UAAU,CAACU,IAAI,EAAER,OAAO,CAAC;EACnD,MAAMW,SAAS,GAAG,MAAMb,UAAU,CAACW,EAAE,EAAET,OAAO,CAAC;EAE/C,IAAI;IAAA,IAAAY,cAAA;IACF,MAAMhC,GAAG,GAAG,MAAMC,KAAK,CAAC,kDAAkDmB,OAAO,UAAU,EAAE;MAC3FlB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACPC,aAAa,EAAEZ,WAAW;QAC1B,cAAc,EAAE;MAClB,CAAC;MACDa,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBC,WAAW,EAAE,CACX,CAACsB,WAAW,CAACT,GAAG,EAAES,WAAW,CAACR,GAAG,CAAC,EAClC,CAACS,SAAS,CAACV,GAAG,EAAEU,SAAS,CAACT,GAAG,CAAC,CAC/B;QACDW,UAAU,EAAE,SAAS;QACrBC,YAAY,EAAE;MAChB,CAAC;IACH,CAAC,CAAC;IACF,MAAMvB,IAAI,GAAG,MAAMX,GAAG,CAACY,IAAI,CAAC,CAAC;IAC7B,KAAAoB,cAAA,GAAIrB,IAAI,CAACwB,QAAQ,cAAAH,cAAA,eAAbA,cAAA,CAAeR,MAAM,EAAE;MACzB,OAAO;QACLX,MAAM,EAAEF,IAAI,CAACwB,QAAQ,CAAC,CAAC,CAAC,CAACpB,QAAQ,CAACP,WAAW,CAAC4B,GAAG,CAAC,CAAC,CAACf,GAAG,EAAEC,GAAG,CAAC,KAAK,CAACA,GAAG,EAAED,GAAG,CAAC,CAAC;QAC7EJ,OAAO,EAAEN,IAAI,CAACwB,QAAQ,CAAC,CAAC,CAAC,CAACE,UAAU,CAACpB,OAAO;QAC5CG;MACF,CAAC;IACH;EACF,CAAC,CAAC,MAAM;IACN,OAAO,IAAI;EACb;EAEA,OAAO,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}