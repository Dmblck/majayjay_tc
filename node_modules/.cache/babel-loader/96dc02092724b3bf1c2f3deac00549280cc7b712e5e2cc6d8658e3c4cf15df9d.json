{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Majayjay Tourism Circuit\\\\src\\\\pages\\\\LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LoginPage() {\n  _s();\n  const [identifier, setIdentifier] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n    try {\n      const res = await fetch(\"http://localhost:5000/api/users/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          identifier,\n          password\n        })\n      });\n      const data = await res.json();\n      setLoading(false);\n      if (data.success) {\n        localStorage.setItem(\"token\", data.token);\n        localStorage.setItem(\"user\", JSON.stringify(data.user));\n        if (data.user.role === \"admin\") {\n          navigate(\"/admin/dashboard\");\n        } else {\n          navigate(\"/home\");\n        }\n      } else {\n        setError(data.message || \"Login failed\");\n      }\n    } catch (err) {\n      console.error(err);\n      setError(\"Server error, please try again.\");\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center h-screen bg-gray-100\",\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded shadow-md w-80\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-4 text-center\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 1184\n      }, this), \" \", error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 text-sm mb-3 text-center\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 1256\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email or Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 1376\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: identifier,\n            onChange: e => setIdentifier(e.target.value),\n            required: true,\n            className: \"w-full border p-2 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 1410\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 1353\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 1576\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            required: true,\n            className: \"w-full border p-2 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1,\n            columnNumber: 1601\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 1553\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          className: \"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 disabled:opacity-50\",\n          children: [\" \", loading ? \"Logging in...\" : \"Login\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 1744\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 1322\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-sm mt-3\",\n        children: [\" Don't have an account?\", \" \", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-blue-600 cursor-pointer\",\n          onClick: () => navigate(\"/signup\"),\n          children: \" Sign Up \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1,\n          columnNumber: 2007\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1,\n        columnNumber: 1938\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1,\n      columnNumber: 1130\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1,\n    columnNumber: 1058\n  }, this);\n}\n_s(LoginPage, \"SSY8L8e4YCOajVCu807N7LkTAaw=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","Link","useNavigate","jsxDEV","_jsxDEV","LoginPage","_s","identifier","setIdentifier","password","setPassword","error","setError","loading","setLoading","navigate","handleSubmit","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","data","json","success","localStorage","setItem","token","user","role","message","err","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","required","disabled","onClick","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState } from \"react\"; import { Link, useNavigate } from \"react-router-dom\"; export default function LoginPage() { const [identifier, setIdentifier] = useState(\"\"); const [password, setPassword] = useState(\"\"); const [error, setError] = useState(\"\"); const [loading, setLoading] = useState(false); const navigate = useNavigate(); const handleSubmit = async (e) => { e.preventDefault(); setError(\"\"); setLoading(true); try { const res = await fetch(\"http://localhost:5000/api/users/login\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ identifier, password }), }); const data = await res.json(); setLoading(false); if (data.success) { localStorage.setItem(\"token\", data.token); localStorage.setItem(\"user\", JSON.stringify(data.user)); if (data.user.role === \"admin\") { navigate(\"/admin/dashboard\"); } else { navigate(\"/home\"); } } else { setError(data.message || \"Login failed\"); } } catch (err) { console.error(err); setError(\"Server error, please try again.\"); setLoading(false); } }; return ( <div className=\"flex items-center justify-center h-screen bg-gray-100\"> <div className=\"bg-white p-6 rounded shadow-md w-80\"> <h2 className=\"text-xl font-bold mb-4 text-center\">Login</h2> {error && <p className=\"text-red-500 text-sm mb-3 text-center\">{error}</p>} <form onSubmit={handleSubmit}> <div className=\"mb-3\"> <label>Email or Username:</label> <input type=\"text\" value={identifier} onChange={(e) => setIdentifier(e.target.value)} required className=\"w-full border p-2 rounded\" /> </div> <div className=\"mb-3\"> <label>Password:</label> <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} required className=\"w-full border p-2 rounded\" /> </div> <button type=\"submit\" disabled={loading} className=\"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 disabled:opacity-50\" > {loading ? \"Logging in...\" : \"Login\"} </button> </form> <p className=\"text-center text-sm mt-3\"> Don't have an account?{\" \"} <span className=\"text-blue-600 cursor-pointer\" onClick={() => navigate(\"/signup\")} > Sign Up </span> </p> </div> </div> ); }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}