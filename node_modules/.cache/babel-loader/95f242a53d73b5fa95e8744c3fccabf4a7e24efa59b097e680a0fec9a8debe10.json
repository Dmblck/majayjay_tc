{"ast":null,"code":"const ORS_API_KEY = process.env.REACT_APP_ORS_KEY;\nexport async function getRouteInfo(points, mode = \"driving-car\") {\n  if (!points || points.length < 2) {\n    console.error(\"âŒ Invalid coordinates passed to getRouteInfo():\", points);\n    return null;\n  }\n  const coords = points.map(p => [p.lng, p.lat]);\n  console.log(\"ðŸ›° Sending coordinates to ORS:\", coords);\n  try {\n    const response = await fetch(`https://api.openrouteservice.org/v2/directions/${mode}/geojson`, {\n      method: \"POST\",\n      headers: {\n        Authorization: ORS_API_KEY,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        coordinates: coords\n      })\n    });\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(\"âŒ ORS API error:\", response.status, errorText);\n      return null;\n    }\n    const data = await response.json();\n    console.log(\"âœ… ORS response received:\", data);\n    if (!data.features || data.features.length === 0) {\n      console.error(\"âŒ No route found in ORS response\");\n      return null;\n    }\n    const route = data.features[0];\n    const summary = route.properties.summary;\n    const path = route.geometry.coordinates.map(([lon, lat]) => ({\n      lat,\n      lng: lon\n    }));\n    const center = path[Math.floor(path.length / 2)];\n    return {\n      path,\n      distance: summary.distance,\n      duration: summary.duration,\n      center,\n      waypoints: points\n    };\n  } catch (err) {\n    console.error(\"ðŸ”¥ Routing failed:\", err);\n    return null;\n  }\n}","map":{"version":3,"names":["ORS_API_KEY","process","env","REACT_APP_ORS_KEY","getRouteInfo","points","mode","length","console","error","coords","map","p","lng","lat","log","response","fetch","method","headers","Authorization","body","JSON","stringify","coordinates","ok","errorText","text","status","data","json","features","route","summary","properties","path","geometry","lon","center","Math","floor","distance","duration","waypoints","err"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/services/orsService.js"],"sourcesContent":["const ORS_API_KEY = process.env.REACT_APP_ORS_KEY;\r\n\r\nexport async function getRouteInfo(points, mode = \"driving-car\") {\r\n  if (!points || points.length < 2) {\r\n    console.error(\"âŒ Invalid coordinates passed to getRouteInfo():\", points);\r\n    return null;\r\n  }\r\n\r\n  const coords = points.map((p) => [p.lng, p.lat]);\r\n  console.log(\"ðŸ›° Sending coordinates to ORS:\", coords);\r\n\r\n  try {\r\n    const response = await fetch(\r\n      `https://api.openrouteservice.org/v2/directions/${mode}/geojson`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: ORS_API_KEY,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ coordinates: coords }),\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      console.error(\"âŒ ORS API error:\", response.status, errorText);\r\n      return null;\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log(\"âœ… ORS response received:\", data);\r\n\r\n    if (!data.features || data.features.length === 0) {\r\n      console.error(\"âŒ No route found in ORS response\");\r\n      return null;\r\n    }\r\n\r\n    const route = data.features[0];\r\n    const summary = route.properties.summary;\r\n\r\n    const path = route.geometry.coordinates.map(([lon, lat]) => ({\r\n      lat,\r\n      lng: lon,\r\n    }));\r\n\r\n    const center = path[Math.floor(path.length / 2)];\r\n\r\n    return {\r\n      path,\r\n      distance: summary.distance,\r\n      duration: summary.duration,\r\n      center,\r\n      waypoints: points,\r\n    };\r\n  } catch (err) {\r\n    console.error(\"ðŸ”¥ Routing failed:\", err);\r\n    return null;\r\n  }\r\n}\r\n"],"mappings":"AAAA,MAAMA,WAAW,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AAEjD,OAAO,eAAeC,YAAYA,CAACC,MAAM,EAAEC,IAAI,GAAG,aAAa,EAAE;EAC/D,IAAI,CAACD,MAAM,IAAIA,MAAM,CAACE,MAAM,GAAG,CAAC,EAAE;IAChCC,OAAO,CAACC,KAAK,CAAC,iDAAiD,EAAEJ,MAAM,CAAC;IACxE,OAAO,IAAI;EACb;EAEA,MAAMK,MAAM,GAAGL,MAAM,CAACM,GAAG,CAAEC,CAAC,IAAK,CAACA,CAAC,CAACC,GAAG,EAAED,CAAC,CAACE,GAAG,CAAC,CAAC;EAChDN,OAAO,CAACO,GAAG,CAAC,gCAAgC,EAAEL,MAAM,CAAC;EAErD,IAAI;IACF,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAC1B,kDAAkDX,IAAI,UAAU,EAChE;MACEY,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACPC,aAAa,EAAEpB,WAAW;QAC1B,cAAc,EAAE;MAClB,CAAC;MACDqB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEC,WAAW,EAAEd;MAAO,CAAC;IAC9C,CACF,CAAC;IAED,IAAI,CAACM,QAAQ,CAACS,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;MACvCnB,OAAO,CAACC,KAAK,CAAC,kBAAkB,EAAEO,QAAQ,CAACY,MAAM,EAAEF,SAAS,CAAC;MAC7D,OAAO,IAAI;IACb;IAEA,MAAMG,IAAI,GAAG,MAAMb,QAAQ,CAACc,IAAI,CAAC,CAAC;IAClCtB,OAAO,CAACO,GAAG,CAAC,0BAA0B,EAAEc,IAAI,CAAC;IAE7C,IAAI,CAACA,IAAI,CAACE,QAAQ,IAAIF,IAAI,CAACE,QAAQ,CAACxB,MAAM,KAAK,CAAC,EAAE;MAChDC,OAAO,CAACC,KAAK,CAAC,kCAAkC,CAAC;MACjD,OAAO,IAAI;IACb;IAEA,MAAMuB,KAAK,GAAGH,IAAI,CAACE,QAAQ,CAAC,CAAC,CAAC;IAC9B,MAAME,OAAO,GAAGD,KAAK,CAACE,UAAU,CAACD,OAAO;IAExC,MAAME,IAAI,GAAGH,KAAK,CAACI,QAAQ,CAACZ,WAAW,CAACb,GAAG,CAAC,CAAC,CAAC0B,GAAG,EAAEvB,GAAG,CAAC,MAAM;MAC3DA,GAAG;MACHD,GAAG,EAAEwB;IACP,CAAC,CAAC,CAAC;IAEH,MAAMC,MAAM,GAAGH,IAAI,CAACI,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC5B,MAAM,GAAG,CAAC,CAAC,CAAC;IAEhD,OAAO;MACL4B,IAAI;MACJM,QAAQ,EAAER,OAAO,CAACQ,QAAQ;MAC1BC,QAAQ,EAAET,OAAO,CAACS,QAAQ;MAC1BJ,MAAM;MACNK,SAAS,EAAEtC;IACb,CAAC;EACH,CAAC,CAAC,OAAOuC,GAAG,EAAE;IACZpC,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEmC,GAAG,CAAC;IACxC,OAAO,IAAI;EACb;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}