{"ast":null,"code":"import _objectSpread from\"C:/xampp/htdocs/Majayjay Tourism Circuit/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useRef}from\"react\";import{MapContainer,TileLayer,Marker,useMapEvents,useMap}from\"react-leaflet\";import\"leaflet/dist/leaflet.css\";import L from\"leaflet\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const createColoredIcon=color=>new L.Icon({iconUrl:\"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-\".concat(color,\".png\"),shadowUrl:\"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});// Category color mapping\nconst CATEGORY_COLOR={\"Nature & Outdoors\":\"green\",\"Culture & Heritage\":\"yellow\",\"Farming & Agriculture\":\"orange\",\"Food & Drink\":\"blue\",\"Accommodation & Stay\":\"red\"};// Helper to determine category based on tags\nconst determineCategory=function(){let tags=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";const t=tags.toLowerCase().split(\",\").map(x=>x.trim());if(t.some(x=>[\"history\",\"culture\",\"religion\",\"architecture\",\"spiritual\"].includes(x)))return\"Culture & Heritage\";if(t.some(x=>[\"farm\",\"agri\",\"organic\",\"animal\"].includes(x)))return\"Farming & Agriculture\";if(t.some(x=>[\"resort\",\"motel\",\"hotel\",\"lodge\"].includes(x)))return\"Accommodation & Stay\";if(t.some(x=>[\"restaurant\",\"coffee\",\"food\"].includes(x)))return\"Food & Drink\";return\"Nature & Outdoors\";};delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:require(\"leaflet/dist/images/marker-icon-2x.png\"),iconUrl:require(\"leaflet/dist/images/marker-icon.png\"),shadowUrl:require(\"leaflet/dist/images/marker-shadow.png\")});// Helper to fly to location when selected from list\nfunction ZoomToLocation(_ref){let{selectedPoi}=_ref;const map=useMap();useEffect(()=>{if(selectedPoi)map.flyTo([selectedPoi.lat,selectedPoi.lng],16,{duration:1});},[selectedPoi,map]);return null;}// Handles clicking map to add POI\nfunction AddPoiHandler(_ref2){let{addingPoi,onMapClick}=_ref2;useMapEvents({click(e){if(addingPoi){onMapClick(e);}}});return null;}export default function AdminPOIsMap(){const[pois,setPois]=useState([]);const[selectedPoi,setSelectedPoi]=useState(null);const[addingPoi,setAddingPoi]=useState(false);const[imagePreview,setImagePreview]=useState(null);const[searchTerm,setSearchTerm]=useState(\"\");// üîç search term\nconst user=JSON.parse(localStorage.getItem(\"user\"));const token=user===null||user===void 0?void 0:user.token;const fileInputRef=useRef(null);const mapRef=useRef(null);// Fetch POIs\nuseEffect(()=>{fetch(\"http://localhost:5000/api/pois\",{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>res.json()).then(data=>setPois(Array.isArray(data)?data:[])).catch(err=>console.error(err));},[token]);// Image preview\nuseEffect(()=>{if(!selectedPoi){setImagePreview(null);return;}if(selectedPoi.imageFile){setImagePreview(URL.createObjectURL(selectedPoi.imageFile));}else if(selectedPoi.image){setImagePreview(\"http://localhost:5000/images/\".concat(selectedPoi.image));}else{setImagePreview(null);}},[selectedPoi]);const handleMapClick=e=>{setSelectedPoi({lat:e.latlng.lat,lng:e.latlng.lng,name:\"\",tags:\"\",description:\"\",visitors:\"Moderate\",isNew:true});setAddingPoi(false);};const handleImageUpload=e=>{const file=e.target.files[0];if(!file||!selectedPoi)return;setSelectedPoi(_objectSpread(_objectSpread({},selectedPoi),{},{imageFile:file}));};const uploadImage=async file=>{if(!file)return null;const fd=new FormData();fd.append(\"image\",file);const res=await fetch(\"http://localhost:5000/api/upload-image\",{method:\"POST\",headers:{Authorization:\"Bearer \".concat(token)},body:fd});if(!res.ok)throw new Error(\"Image upload failed\");const data=await res.json();return data.filename;};const savePoi=async()=>{if(!selectedPoi)return;try{const poiToSave=_objectSpread({},selectedPoi);if(selectedPoi.imageFile){const filename=await uploadImage(selectedPoi.imageFile);poiToSave.image=filename;delete poiToSave.imageFile;}if(selectedPoi.isNew){const res=await fetch(\"http://localhost:5000/api/pois\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify(poiToSave)});if(!res.ok)throw new Error(\"Failed to create POI\");const savedPoi=await res.json();setPois(prev=>[...prev,savedPoi]);}else{const res=await fetch(\"http://localhost:5000/api/pois/\".concat(selectedPoi.id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)},body:JSON.stringify(poiToSave)});if(!res.ok){const text=await res.text();console.error(\"‚ùå Server response:\",res.status,text);throw new Error(\"Failed to update POI\");}setPois(prev=>prev.map(p=>p.id===selectedPoi.id?_objectSpread(_objectSpread({},p),poiToSave):p));}setSelectedPoi(null);setImagePreview(null);if(fileInputRef.current)fileInputRef.current.value=\"\";alert(\"POI saved successfully.\");}catch(err){console.error(err);alert(\"Error saving POI: \"+err.message);}};const deletePoi=async id=>{if(!window.confirm(\"Delete this POI?\"))return;try{const res=await fetch(\"http://localhost:5000/api/pois/\".concat(id),{method:\"DELETE\",headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok)throw new Error(\"Failed to delete POI\");setPois(prev=>prev.filter(p=>p.id!==id));if((selectedPoi===null||selectedPoi===void 0?void 0:selectedPoi.id)===id)setSelectedPoi(null);alert(\"POI deleted.\");}catch(err){console.error(err);alert(\"Error deleting POI: \"+err.message);}};// üß≠ Search filter\nconst filteredPOIs=pois.filter(poi=>{const search=searchTerm.toLowerCase();return poi.name.toLowerCase().includes(search)||poi.tags&&poi.tags.toLowerCase().includes(search);});// Layout fix (no overlap with navbar)\nconst leftNavWidth=105;const shift=leftNavWidth+16;return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",height:\"100vh\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"\".concat(leftNavWidth,\"px\"),background:\"#333\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,marginLeft:\"\".concat(shift,\"px\"),display:\"flex\",flexDirection:\"column\",position:\"relative\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setAddingPoi(prev=>!prev);setSelectedPoi(null);},style:{position:\"absolute\",top:12,right:20,zIndex:1100,background:addingPoi?\"#ff9800\":\"#4caf50\",color:\"#fff\",border:\"none\",padding:\"10px 14px\",borderRadius:6,cursor:\"pointer\",boxShadow:\"0 2px 6px rgba(0,0,0,0.2)\"},children:addingPoi?\"Click map to place POI\":\"‚ûï Add POI\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:/*#__PURE__*/_jsxs(MapContainer,{center:[14.1619,121.4626],zoom:14,style:{height:\"100%\",width:\"100%\",cursor:addingPoi?\"crosshair\":\"auto\"},whenCreated:mapInstance=>mapRef.current=mapInstance,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 OpenStreetMap contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(ZoomToLocation,{selectedPoi:selectedPoi}),/*#__PURE__*/_jsx(AddPoiHandler,{addingPoi:addingPoi,onMapClick:handleMapClick}),filteredPOIs.map(p=>{const category=determineCategory(p.tags);return/*#__PURE__*/_jsx(Marker,{position:[p.lat,p.lng],icon:createColoredIcon(CATEGORY_COLOR[category]||\"blue\"),eventHandlers:{click:()=>{setSelectedPoi(_objectSpread(_objectSpread({},p),{},{isNew:false}));setAddingPoi(false);}}},p.id);}),\"// For new POI being added\",(selectedPoi===null||selectedPoi===void 0?void 0:selectedPoi.isNew)&&/*#__PURE__*/_jsx(Marker,{position:[selectedPoi.lat,selectedPoi.lng],draggable:true,icon:createColoredIcon(CATEGORY_COLOR[determineCategory(selectedPoi.tags)]),eventHandlers:{dragend:e=>{const{lat,lng}=e.target.getLatLng();setSelectedPoi(prev=>_objectSpread(_objectSpread({},prev),{},{lat,lng}));}}}),(selectedPoi===null||selectedPoi===void 0?void 0:selectedPoi.isNew)&&/*#__PURE__*/_jsx(Marker,{position:[selectedPoi.lat,selectedPoi.lng],draggable:true,eventHandlers:{dragend:e=>{const{lat,lng}=e.target.getLatLng();setSelectedPoi(prev=>_objectSpread(_objectSpread({},prev),{},{lat,lng}));}}})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{height:300,overflowY:\"auto\",background:\"#fff\",borderTop:\"1px solid #ccc\",padding:\"12px 18px\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:10},children:\"\\uD83D\\uDCCB Points of Interest\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by name or tags...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{width:\"100%\",padding:\"8px 10px\",marginBottom:\"10px\",borderRadius:\"6px\",border:\"1px solid #ccc\"}}),filteredPOIs.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:\"#666\"},children:\"No POIs match your search.\"}):/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\",borderCollapse:\"collapse\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:\"#f7f7f7\",textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:8},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:8},children:\"Visitors\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:8},children:\"Tags\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:8},children:\"Description\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredPOIs.map(poi=>/*#__PURE__*/_jsxs(\"tr\",{onClick:()=>{setSelectedPoi(_objectSpread(_objectSpread({},poi),{},{isNew:false}));setAddingPoi(false);},style:{cursor:\"pointer\",borderBottom:\"1px solid #eee\",background:(selectedPoi===null||selectedPoi===void 0?void 0:selectedPoi.id)===poi.id?\"#e8f4ff\":\"transparent\"},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:\"6px 8px\"},children:poi.name}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"6px 8px\"},children:poi.visitors}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"6px 8px\"},children:poi.tags}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"6px 8px\"},children:poi.description})]},poi.id))})]})]})]}),selectedPoi&&/*#__PURE__*/_jsxs(\"div\",{style:{width:350,background:\"#fff\",borderLeft:\"1px solid #ccc\",padding:18,overflowY:\"auto\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:selectedPoi.isNew?\"Add New POI\":\"Edit POI\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:selectedPoi.name,onChange:e=>setSelectedPoi(_objectSpread(_objectSpread({},selectedPoi),{},{name:e.target.value})),style:{width:\"100%\",marginBottom:8}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Tags\",value:selectedPoi.tags,onChange:e=>setSelectedPoi(_objectSpread(_objectSpread({},selectedPoi),{},{tags:e.target.value})),style:{width:\"100%\",marginBottom:8}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\",value:selectedPoi.description,onChange:e=>setSelectedPoi(_objectSpread(_objectSpread({},selectedPoi),{},{description:e.target.value})),style:{width:\"100%\",marginBottom:8}}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",onChange:handleImageUpload,style:{width:\"100%\",marginBottom:8}}),imagePreview&&/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"Preview\",style:{width:\"100%\",borderRadius:4,marginBottom:8}}),/*#__PURE__*/_jsxs(\"select\",{value:selectedPoi.visitors,onChange:e=>setSelectedPoi(_objectSpread(_objectSpread({},selectedPoi),{},{visitors:e.target.value})),style:{width:\"100%\",marginBottom:8},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Very High\"}),/*#__PURE__*/_jsx(\"option\",{children:\"High\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Moderate\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Low\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:savePoi,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedPoi(null),children:\"Cancel\"}),!selectedPoi.isNew&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deletePoi(selectedPoi.id),style:{color:\"red\"},children:\"Delete\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","MapContainer","TileLayer","Marker","useMapEvents","useMap","L","jsx","_jsx","jsxs","_jsxs","createColoredIcon","color","Icon","iconUrl","concat","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","CATEGORY_COLOR","determineCategory","tags","arguments","length","undefined","t","toLowerCase","split","map","x","trim","some","includes","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","ZoomToLocation","_ref","selectedPoi","flyTo","lat","lng","duration","AddPoiHandler","_ref2","addingPoi","onMapClick","click","e","AdminPOIsMap","pois","setPois","setSelectedPoi","setAddingPoi","imagePreview","setImagePreview","searchTerm","setSearchTerm","user","JSON","parse","localStorage","getItem","token","fileInputRef","mapRef","fetch","headers","Authorization","then","res","json","data","Array","isArray","catch","err","console","error","imageFile","URL","createObjectURL","image","handleMapClick","latlng","name","description","visitors","isNew","handleImageUpload","file","target","files","_objectSpread","uploadImage","fd","FormData","append","method","body","ok","Error","filename","savePoi","poiToSave","stringify","savedPoi","prev","id","text","status","p","current","value","alert","message","deletePoi","window","confirm","filter","filteredPOIs","poi","search","leftNavWidth","shift","style","display","height","children","width","background","flex","marginLeft","flexDirection","position","onClick","top","right","zIndex","border","padding","borderRadius","cursor","boxShadow","center","zoom","whenCreated","mapInstance","attribution","url","category","icon","eventHandlers","draggable","dragend","getLatLng","overflowY","borderTop","marginBottom","type","placeholder","onChange","borderCollapse","textAlign","borderBottom","borderLeft","ref","src","alt","justifyContent"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/pages/admin/AdminPOIs.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, useMapEvents, useMap } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport L from \"leaflet\";\r\n\r\nconst createColoredIcon = (color) =>\r\n  new L.Icon({\r\n    iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${color}.png`,\r\n    shadowUrl:\r\n      \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\",\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41],\r\n  });\r\n\r\n// Category color mapping\r\nconst CATEGORY_COLOR = {\r\n  \"Nature & Outdoors\": \"green\",\r\n  \"Culture & Heritage\": \"yellow\",\r\n  \"Farming & Agriculture\": \"orange\",\r\n  \"Food & Drink\": \"blue\",\r\n  \"Accommodation & Stay\": \"red\",\r\n};\r\n\r\n// Helper to determine category based on tags\r\nconst determineCategory = (tags = \"\") => {\r\n  const t = tags.toLowerCase().split(\",\").map((x) => x.trim());\r\n  if (t.some((x) => [\"history\", \"culture\", \"religion\", \"architecture\", \"spiritual\"].includes(x))) return \"Culture & Heritage\";\r\n  if (t.some((x) => [\"farm\", \"agri\", \"organic\", \"animal\"].includes(x))) return \"Farming & Agriculture\";\r\n  if (t.some((x) => [\"resort\", \"motel\", \"hotel\", \"lodge\"].includes(x))) return \"Accommodation & Stay\";\r\n  if (t.some((x) => [\"restaurant\", \"coffee\", \"food\"].includes(x))) return \"Food & Drink\";\r\n  return \"Nature & Outdoors\";\r\n};\r\n\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\r\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\r\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\r\n});\r\n\r\n// Helper to fly to location when selected from list\r\nfunction ZoomToLocation({ selectedPoi }) {\r\n  const map = useMap();\r\n  useEffect(() => {\r\n    if (selectedPoi) map.flyTo([selectedPoi.lat, selectedPoi.lng], 16, { duration: 1 });\r\n  }, [selectedPoi, map]);\r\n  return null;\r\n}\r\n\r\n// Handles clicking map to add POI\r\nfunction AddPoiHandler({ addingPoi, onMapClick }) {\r\n  useMapEvents({\r\n    click(e) {\r\n      if (addingPoi) {\r\n        onMapClick(e);\r\n      }\r\n    },\r\n  });\r\n  return null;\r\n}\r\n\r\nexport default function AdminPOIsMap() {\r\n  const [pois, setPois] = useState([]);\r\n  const [selectedPoi, setSelectedPoi] = useState(null);\r\n  const [addingPoi, setAddingPoi] = useState(false);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState(\"\"); // üîç search term\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  const token = user?.token;\r\n  const fileInputRef = useRef(null);\r\n  const mapRef = useRef(null);\r\n\r\n  // Fetch POIs\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/pois\", {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => setPois(Array.isArray(data) ? data : []))\r\n      .catch((err) => console.error(err));\r\n  }, [token]);\r\n\r\n  // Image preview\r\n  useEffect(() => {\r\n    if (!selectedPoi) {\r\n      setImagePreview(null);\r\n      return;\r\n    }\r\n    if (selectedPoi.imageFile) {\r\n      setImagePreview(URL.createObjectURL(selectedPoi.imageFile));\r\n    } else if (selectedPoi.image) {\r\n      setImagePreview(`http://localhost:5000/images/${selectedPoi.image}`);\r\n    } else {\r\n      setImagePreview(null);\r\n    }\r\n  }, [selectedPoi]);\r\n\r\n  const handleMapClick = (e) => {\r\n    setSelectedPoi({\r\n      lat: e.latlng.lat,\r\n      lng: e.latlng.lng,\r\n      name: \"\",\r\n      tags: \"\",\r\n      description: \"\",\r\n      visitors: \"Moderate\",\r\n      isNew: true,\r\n    });\r\n    setAddingPoi(false);\r\n  };\r\n\r\n  const handleImageUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file || !selectedPoi) return;\r\n    setSelectedPoi({ ...selectedPoi, imageFile: file });\r\n  };\r\n\r\n  const uploadImage = async (file) => {\r\n    if (!file) return null;\r\n    const fd = new FormData();\r\n    fd.append(\"image\", file);\r\n    const res = await fetch(\"http://localhost:5000/api/upload-image\", {\r\n      method: \"POST\",\r\n      headers: { Authorization: `Bearer ${token}` },\r\n      body: fd,\r\n    });\r\n    if (!res.ok) throw new Error(\"Image upload failed\");\r\n    const data = await res.json();\r\n    return data.filename;\r\n  };\r\n\r\n  const savePoi = async () => {\r\n    if (!selectedPoi) return;\r\n    try {\r\n      const poiToSave = { ...selectedPoi };\r\n\r\n      if (selectedPoi.imageFile) {\r\n        const filename = await uploadImage(selectedPoi.imageFile);\r\n        poiToSave.image = filename;\r\n        delete poiToSave.imageFile;\r\n      }\r\n\r\n      if (selectedPoi.isNew) {\r\n        const res = await fetch(\"http://localhost:5000/api/pois\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n          body: JSON.stringify(poiToSave),\r\n        });\r\n        if (!res.ok) throw new Error(\"Failed to create POI\");\r\n        const savedPoi = await res.json();\r\n        setPois((prev) => [...prev, savedPoi]);\r\n      } else {\r\n        const res = await fetch(`http://localhost:5000/api/pois/${selectedPoi.id}`, {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n          body: JSON.stringify(poiToSave),\r\n        });\r\n        if (!res.ok) {\r\n          const text = await res.text();\r\n          console.error(\"‚ùå Server response:\", res.status, text);\r\n          throw new Error(\"Failed to update POI\");\r\n        }\r\n        setPois((prev) => prev.map((p) => (p.id === selectedPoi.id ? { ...p, ...poiToSave } : p)));\r\n      }\r\n\r\n      setSelectedPoi(null);\r\n      setImagePreview(null);\r\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n      alert(\"POI saved successfully.\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Error saving POI: \" + err.message);\r\n    }\r\n  };\r\n\r\n  const deletePoi = async (id) => {\r\n    if (!window.confirm(\"Delete this POI?\")) return;\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/pois/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (!res.ok) throw new Error(\"Failed to delete POI\");\r\n      setPois((prev) => prev.filter((p) => p.id !== id));\r\n      if (selectedPoi?.id === id) setSelectedPoi(null);\r\n      alert(\"POI deleted.\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Error deleting POI: \" + err.message);\r\n    }\r\n  };\r\n\r\n  // üß≠ Search filter\r\n  const filteredPOIs = pois.filter((poi) => {\r\n    const search = searchTerm.toLowerCase();\r\n    return (\r\n      poi.name.toLowerCase().includes(search) ||\r\n      (poi.tags && poi.tags.toLowerCase().includes(search))\r\n    );\r\n  });\r\n\r\n  // Layout fix (no overlap with navbar)\r\n  const leftNavWidth = 105;\r\n  const shift = leftNavWidth + 16;\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", height: \"100vh\" }}>\r\n      {/* Navbar space */}\r\n      <div style={{ width: `${leftNavWidth}px`, background: \"#333\" }} />\r\n\r\n      {/* Main content */}\r\n      <div style={{ flex: 1, marginLeft: `${shift}px`, display: \"flex\", flexDirection: \"column\", position: \"relative\" }}>\r\n        {/* Add POI button */}\r\n        <button\r\n          onClick={() => {\r\n            setAddingPoi((prev) => !prev);\r\n            setSelectedPoi(null);\r\n          }}\r\n          style={{\r\n            position: \"absolute\",\r\n            top: 12,\r\n            right: 20,\r\n            zIndex: 1100,\r\n            background: addingPoi ? \"#ff9800\" : \"#4caf50\",\r\n            color: \"#fff\",\r\n            border: \"none\",\r\n            padding: \"10px 14px\",\r\n            borderRadius: 6,\r\n            cursor: \"pointer\",\r\n            boxShadow: \"0 2px 6px rgba(0,0,0,0.2)\",\r\n          }}\r\n        >\r\n          {addingPoi ? \"Click map to place POI\" : \"‚ûï Add POI\"}\r\n        </button>\r\n\r\n        {/* Map */}\r\n        <div style={{ flex: 1 }}>\r\n          <MapContainer\r\n            center={[14.1619, 121.4626]}\r\n            zoom={14}\r\n            style={{\r\n              height: \"100%\",\r\n              width: \"100%\",\r\n              cursor: addingPoi ? \"crosshair\" : \"auto\",\r\n            }}\r\n            whenCreated={(mapInstance) => (mapRef.current = mapInstance)}\r\n          >\r\n            <TileLayer attribution='&copy; OpenStreetMap contributors' url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n            <ZoomToLocation selectedPoi={selectedPoi} />\r\n            <AddPoiHandler addingPoi={addingPoi} onMapClick={handleMapClick} />\r\n\r\n            {filteredPOIs.map((p) => {\r\n              const category = determineCategory(p.tags);\r\n              return (\r\n                <Marker\r\n                  key={p.id}\r\n                  position={[p.lat, p.lng]}\r\n                  icon={createColoredIcon(CATEGORY_COLOR[category] || \"blue\")}\r\n                  eventHandlers={{\r\n                    click: () => {\r\n                      setSelectedPoi({ ...p, isNew: false });\r\n                      setAddingPoi(false);\r\n                    },\r\n                  }}\r\n                />\r\n              );\r\n            })}\r\n\r\n            // For new POI being added\r\n            {selectedPoi?.isNew && (\r\n              <Marker\r\n                position={[selectedPoi.lat, selectedPoi.lng]}\r\n                draggable\r\n                icon={createColoredIcon(\r\n                  CATEGORY_COLOR[determineCategory(selectedPoi.tags)]\r\n                )}\r\n                eventHandlers={{\r\n                  dragend: (e) => {\r\n                    const { lat, lng } = e.target.getLatLng();\r\n                    setSelectedPoi((prev) => ({ ...prev, lat, lng }));\r\n                  },\r\n                }}\r\n              />\r\n            )}\r\n            \r\n            {selectedPoi?.isNew && (\r\n              <Marker\r\n                position={[selectedPoi.lat, selectedPoi.lng]}\r\n                draggable\r\n                eventHandlers={{\r\n                  dragend: (e) => {\r\n                    const { lat, lng } = e.target.getLatLng();\r\n                    setSelectedPoi((prev) => ({ ...prev, lat, lng }));\r\n                  },\r\n                }}\r\n              />\r\n            )}\r\n          </MapContainer>\r\n        </div>\r\n\r\n        {/* Bottom POI List */}\r\n        <div style={{ height: 300, overflowY: \"auto\", background: \"#fff\", borderTop: \"1px solid #ccc\", padding: \"12px 18px\" }}>\r\n          <h3 style={{ marginBottom: 10 }}>üìã Points of Interest</h3>\r\n\r\n          {/* üîç Search bar */}\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by name or tags...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            style={{\r\n              width: \"100%\",\r\n              padding: \"8px 10px\",\r\n              marginBottom: \"10px\",\r\n              borderRadius: \"6px\",\r\n              border: \"1px solid #ccc\",\r\n            }}\r\n          />\r\n\r\n          {filteredPOIs.length === 0 ? (\r\n            <p style={{ color: \"#666\" }}>No POIs match your search.</p>\r\n          ) : (\r\n            <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\r\n              <thead>\r\n                <tr style={{ background: \"#f7f7f7\", textAlign: \"left\" }}>\r\n                  <th style={{ padding: 8 }}>Name</th>\r\n                  <th style={{ padding: 8 }}>Visitors</th>\r\n                  <th style={{ padding: 8 }}>Tags</th>\r\n                  <th style={{ padding: 8 }}>Description</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredPOIs.map((poi) => (\r\n                  <tr\r\n                    key={poi.id}\r\n                    onClick={() => {\r\n                      setSelectedPoi({ ...poi, isNew: false });\r\n                      setAddingPoi(false);\r\n                    }}\r\n                    style={{\r\n                      cursor: \"pointer\",\r\n                      borderBottom: \"1px solid #eee\",\r\n                      background: selectedPoi?.id === poi.id ? \"#e8f4ff\" : \"transparent\",\r\n                    }}\r\n                  >\r\n                    <td style={{ padding: \"6px 8px\" }}>{poi.name}</td>\r\n                    <td style={{ padding: \"6px 8px\" }}>{poi.visitors}</td>\r\n                    <td style={{ padding: \"6px 8px\" }}>{poi.tags}</td>\r\n                    <td style={{ padding: \"6px 8px\" }}>{poi.description}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Right panel */}\r\n      {selectedPoi && (\r\n        <div style={{ width: 350, background: \"#fff\", borderLeft: \"1px solid #ccc\", padding: 18, overflowY: \"auto\" }}>\r\n          <h3>{selectedPoi.isNew ? \"Add New POI\" : \"Edit POI\"}</h3>\r\n\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Name\"\r\n            value={selectedPoi.name}\r\n            onChange={(e) => setSelectedPoi({ ...selectedPoi, name: e.target.value })}\r\n            style={{ width: \"100%\", marginBottom: 8 }}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tags\"\r\n            value={selectedPoi.tags}\r\n            onChange={(e) => setSelectedPoi({ ...selectedPoi, tags: e.target.value })}\r\n            style={{ width: \"100%\", marginBottom: 8 }}\r\n          />\r\n          <textarea\r\n            placeholder=\"Description\"\r\n            value={selectedPoi.description}\r\n            onChange={(e) => setSelectedPoi({ ...selectedPoi, description: e.target.value })}\r\n            style={{ width: \"100%\", marginBottom: 8 }}\r\n          />\r\n          <input ref={fileInputRef} type=\"file\" onChange={handleImageUpload} style={{ width: \"100%\", marginBottom: 8 }} />\r\n          {imagePreview && <img src={imagePreview} alt=\"Preview\" style={{ width: \"100%\", borderRadius: 4, marginBottom: 8 }} />}\r\n          <select\r\n            value={selectedPoi.visitors}\r\n            onChange={(e) => setSelectedPoi({ ...selectedPoi, visitors: e.target.value })}\r\n            style={{ width: \"100%\", marginBottom: 8 }}\r\n          >\r\n            <option>Very High</option>\r\n            <option>High</option>\r\n            <option>Moderate</option>\r\n            <option>Low</option>\r\n          </select>\r\n\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <button onClick={savePoi}>Save</button>\r\n            <button onClick={() => setSelectedPoi(null)}>Cancel</button>\r\n            {!selectedPoi.isNew && (\r\n              <button onClick={() => deletePoi(selectedPoi.id)} style={{ color: \"red\" }}>\r\n                Delete\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}