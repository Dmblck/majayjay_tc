{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Majayjay Tourism Circuit\\\\src\\\\components\\\\RoutePlanner.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RouteDetails() {\n  _s();\n  var _location$state, _location$state2, _location$state5, _location$state6;\n  const location = useLocation();\n  const navigate = useNavigate();\n  const routeSpots = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.itinerary) || [];\n  const [segments, setSegments] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [poiDetails, setPoiDetails] = useState([]);\n  const [saving, setSaving] = useState(false);\n  const [saveMessage, setSaveMessage] = useState(\"\");\n  const [status, setStatus] = useState(\"pending\");\n  const [userLocation, setUserLocation] = useState((_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.startPoint ? {\n    lat: location.state.startPoint.lat,\n    lng: location.state.startPoint.lng\n  } : null);\n  const mapRef = useRef(null);\n  const ORS_API_KEY = \"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImJhNWU3NmIxOTRmMzQyYTg4NzY4MDc2MzVmZDY1ZDRhIiwiaCI6Im11cm11cjY0In0=\";\n  useEffect(() => {\n    if (!userLocation) {\n      navigator.geolocation.getCurrentPosition(pos => {\n        setUserLocation({\n          lat: pos.coords.latitude,\n          lng: pos.coords.longitude\n        });\n      }, () => setUserLocation({\n        lat: 14.6021,\n        lng: 120.9773\n      }));\n    }\n  }, []);\n  const fetchRouteSegment = async (from, to, mode = \"driving-car\") => {\n    try {\n      const res = await fetch(`https://api.openrouteservice.org/v2/directions/${mode}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: ORS_API_KEY,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          coordinates: [[from.lng, from.lat], [to.lng, to.lat]]\n        })\n      });\n      const data = await res.json();\n      const coords = data.features[0].geometry.coordinates.map(([lng, lat]) => [lat, lng]);\n      return coords;\n    } catch (err) {\n      console.error(\"ORS fetch error:\", err);\n      return [];\n    }\n  };\n  const fetchPOIDetails = async (lat, lng) => {\n    try {\n      const res = await fetch(`http://localhost:5000/api/pois/near?lat=${lat}&lng=${lng}`);\n      if (!res.ok) throw new Error(\"POI fetch failed\");\n      const data = await res.json();\n      return data;\n    } catch {\n      return [];\n    }\n  };\n  useEffect(() => {\n    const loadData = async () => {\n      if (!userLocation || routeSpots.length === 0) return;\n      const points = [userLocation, ...routeSpots];\n      const newSegments = [];\n      for (let i = 0; i < points.length - 1; i++) {\n        const coords = await fetchRouteSegment(points[i], points[i + 1]);\n        newSegments.push(coords);\n      }\n      setSegments(newSegments);\n      const poiFetches = await Promise.all(routeSpots.map(spot => fetchPOIDetails(spot.lat, spot.lng)));\n      setPoiDetails(poiFetches.flat());\n      setLoading(false);\n    };\n    loadData();\n  }, [userLocation, routeSpots]);\n  const saveItinerary = async () => {\n    var _location$state3, _location$state4;\n    setSaving(true);\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n    if (!storedUser || !storedUser.id) {\n      alert(\"Please log in first.\");\n      setSaving(false);\n      return;\n    }\n    const itineraryData = {\n      user_id: storedUser.id,\n      name: `Trip - ${new Date().toLocaleString()}`,\n      transport_mode: ((_location$state3 = location.state) === null || _location$state3 === void 0 ? void 0 : _location$state3.transportMode) || \"driving-car\",\n      start_time: ((_location$state4 = location.state) === null || _location$state4 === void 0 ? void 0 : _location$state4.startTime) || new Date().toISOString(),\n      start_lat: userLocation.lat,\n      start_lng: userLocation.lng,\n      points: routeSpots,\n      status: \"saved\"\n    };\n    try {\n      const res = await fetch(\"http://localhost:5000/api/itineraries/save\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(itineraryData)\n      });\n      if (res.ok) {\n        setSaveMessage(\"Itinerary saved successfully!\");\n        setStatus(\"saved\");\n      } else {\n        setSaveMessage(\"Failed to save itinerary.\");\n      }\n    } catch {\n      setSaveMessage(\"Error saving itinerary.\");\n    }\n    setSaving(false);\n    setTimeout(() => setSaveMessage(\"\"), 3000);\n  };\n  if (loading || !userLocation) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\",\n      marginTop: 50\n    },\n    children: \"Loading route...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 40\n  }, this);\n  const userIcon = new L.Icon({\n    iconUrl: \"https://cdn-icons-png.flaticon.com/512/149/149060.png\",\n    iconSize: [32, 32]\n  });\n  const poiIcon = new L.Icon({\n    iconUrl: \"https://cdn-icons-png.flaticon.com/512/854/854878.png\",\n    iconSize: [28, 28]\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      height: \"100vh\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(MapContainer, {\n        center: [userLocation.lat, userLocation.lng],\n        zoom: 13,\n        style: {\n          height: \"100%\",\n          width: \"100%\"\n        },\n        whenCreated: map => mapRef.current = map,\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Marker, {\n          position: [userLocation.lat, userLocation.lng],\n          icon: userIcon,\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: \"You are here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), routeSpots.map((spot, i) => {\n          var _poiDetails$find;\n          return /*#__PURE__*/_jsxDEV(Marker, {\n            position: [spot.lat, spot.lng],\n            icon: poiIcon,\n            children: /*#__PURE__*/_jsxDEV(Popup, {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: spot.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), ((_poiDetails$find = poiDetails.find(p => p.name === spot.name)) === null || _poiDetails$find === void 0 ? void 0 : _poiDetails$find.description) || \"No details available\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this);\n        }), segments.map((seg, i) => /*#__PURE__*/_jsxDEV(Polyline, {\n          positions: seg,\n          color: \"blue\",\n          weight: 4\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        padding: 20,\n        overflowY: \"auto\",\n        background: \"#f5f5f5\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: \"center\"\n        },\n        children: \"Itinerary Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Mode:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), \" \", (_location$state5 = location.state) === null || _location$state5 === void 0 ? void 0 : _location$state5.transportMode]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Start Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), \" \", new Date((_location$state6 = location.state) === null || _location$state6 === void 0 ? void 0 : _location$state6.startTime).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Stops:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n        children: routeSpots.map((spot, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: spot.name\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveItinerary,\n        disabled: saving || status === \"saved\",\n        style: {\n          padding: \"10px 20px\",\n          background: status === \"saved\" ? \"#4caf50\" : \"#2196f3\",\n          color: \"#fff\",\n          border: \"none\",\n          borderRadius: 6,\n          cursor: \"pointer\",\n          width: \"100%\",\n          marginTop: 12\n        },\n        children: saving ? \"Saving...\" : status === \"saved\" ? \"Saved\" : \"Save Itinerary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), saveMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: \"center\",\n          color: \"#333\"\n        },\n        children: saveMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/\"),\n        style: {\n          padding: \"10px 20px\",\n          background: \"#aaa\",\n          color: \"#fff\",\n          border: \"none\",\n          borderRadius: 6,\n          cursor: \"pointer\",\n          width: \"100%\",\n          marginTop: 10\n        },\n        children: \"Back to Planner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n}\n_s(RouteDetails, \"/v547Wj8rFF4+NadF92N03f3m3Y=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = RouteDetails;\nvar _c;\n$RefreshReg$(_c, \"RouteDetails\");","map":{"version":3,"names":["React","useEffect","useState","useRef","MapContainer","TileLayer","Marker","Popup","Polyline","L","useNavigate","useLocation","jsxDEV","_jsxDEV","RouteDetails","_s","_location$state","_location$state2","_location$state5","_location$state6","location","navigate","routeSpots","state","itinerary","segments","setSegments","loading","setLoading","poiDetails","setPoiDetails","saving","setSaving","saveMessage","setSaveMessage","status","setStatus","userLocation","setUserLocation","startPoint","lat","lng","mapRef","ORS_API_KEY","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","fetchRouteSegment","from","to","mode","res","fetch","method","headers","Authorization","body","JSON","stringify","coordinates","data","json","features","geometry","map","err","console","error","fetchPOIDetails","ok","Error","loadData","length","points","newSegments","i","push","poiFetches","Promise","all","spot","flat","saveItinerary","_location$state3","_location$state4","storedUser","parse","localStorage","getItem","id","alert","itineraryData","user_id","name","Date","toLocaleString","transport_mode","transportMode","start_time","startTime","toISOString","start_lat","start_lng","setTimeout","style","textAlign","marginTop","children","fileName","_jsxFileName","lineNumber","columnNumber","userIcon","Icon","iconUrl","iconSize","poiIcon","display","height","flex","center","zoom","width","whenCreated","current","url","position","icon","_poiDetails$find","find","p","description","seg","positions","color","weight","padding","overflowY","background","onClick","disabled","border","borderRadius","cursor","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/components/RoutePlanner.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport L from \"leaflet\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\n\r\nexport default function RouteDetails() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const routeSpots = location.state?.itinerary || [];\r\n  const [segments, setSegments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [poiDetails, setPoiDetails] = useState([]);\r\n  const [saving, setSaving] = useState(false);\r\n  const [saveMessage, setSaveMessage] = useState(\"\");\r\n  const [status, setStatus] = useState(\"pending\");\r\n  const [userLocation, setUserLocation] = useState(\r\n    location.state?.startPoint ? { lat: location.state.startPoint.lat, lng: location.state.startPoint.lng } : null\r\n  );\r\n  const mapRef = useRef(null);\r\n\r\n  const ORS_API_KEY =\r\n    \"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImJhNWU3NmIxOTRmMzQyYTg4NzY4MDc2MzVmZDY1ZDRhIiwiaCI6Im11cm11cjY0In0=\";\r\n\r\n  useEffect(() => {\r\n    if (!userLocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (pos) => {\r\n          setUserLocation({ lat: pos.coords.latitude, lng: pos.coords.longitude });\r\n        },\r\n        () => setUserLocation({ lat: 14.6021, lng: 120.9773 })\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  const fetchRouteSegment = async (from, to, mode = \"driving-car\") => {\r\n    try {\r\n      const res = await fetch(`https://api.openrouteservice.org/v2/directions/${mode}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: ORS_API_KEY,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ coordinates: [[from.lng, from.lat], [to.lng, to.lat]] }),\r\n      });\r\n      const data = await res.json();\r\n      const coords = data.features[0].geometry.coordinates.map(([lng, lat]) => [lat, lng]);\r\n      return coords;\r\n    } catch (err) {\r\n      console.error(\"ORS fetch error:\", err);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const fetchPOIDetails = async (lat, lng) => {\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/pois/near?lat=${lat}&lng=${lng}`);\r\n      if (!res.ok) throw new Error(\"POI fetch failed\");\r\n      const data = await res.json();\r\n      return data;\r\n    } catch {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      if (!userLocation || routeSpots.length === 0) return;\r\n      const points = [userLocation, ...routeSpots];\r\n      const newSegments = [];\r\n      for (let i = 0; i < points.length - 1; i++) {\r\n        const coords = await fetchRouteSegment(points[i], points[i + 1]);\r\n        newSegments.push(coords);\r\n      }\r\n      setSegments(newSegments);\r\n      const poiFetches = await Promise.all(routeSpots.map((spot) => fetchPOIDetails(spot.lat, spot.lng)));\r\n      setPoiDetails(poiFetches.flat());\r\n      setLoading(false);\r\n    };\r\n    loadData();\r\n  }, [userLocation, routeSpots]);\r\n\r\n  const saveItinerary = async () => {\r\n    setSaving(true);\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (!storedUser || !storedUser.id) {\r\n      alert(\"Please log in first.\");\r\n      setSaving(false);\r\n      return;\r\n    }\r\n    const itineraryData = {\r\n      user_id: storedUser.id,\r\n      name: `Trip - ${new Date().toLocaleString()}`,\r\n      transport_mode: location.state?.transportMode || \"driving-car\",\r\n      start_time: location.state?.startTime || new Date().toISOString(),\r\n      start_lat: userLocation.lat,\r\n      start_lng: userLocation.lng,\r\n      points: routeSpots,\r\n      status: \"saved\",\r\n    };\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/itineraries/save\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(itineraryData),\r\n      });\r\n      if (res.ok) {\r\n        setSaveMessage(\"Itinerary saved successfully!\");\r\n        setStatus(\"saved\");\r\n      } else {\r\n        setSaveMessage(\"Failed to save itinerary.\");\r\n      }\r\n    } catch {\r\n      setSaveMessage(\"Error saving itinerary.\");\r\n    }\r\n    setSaving(false);\r\n    setTimeout(() => setSaveMessage(\"\"), 3000);\r\n  };\r\n\r\n  if (loading || !userLocation) return <div style={{ textAlign: \"center\", marginTop: 50 }}>Loading route...</div>;\r\n\r\n  const userIcon = new L.Icon({\r\n    iconUrl: \"https://cdn-icons-png.flaticon.com/512/149/149060.png\",\r\n    iconSize: [32, 32],\r\n  });\r\n\r\n  const poiIcon = new L.Icon({\r\n    iconUrl: \"https://cdn-icons-png.flaticon.com/512/854/854878.png\",\r\n    iconSize: [28, 28],\r\n  });\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", height: \"100vh\" }}>\r\n      <div style={{ flex: 3 }}>\r\n        <MapContainer\r\n          center={[userLocation.lat, userLocation.lng]}\r\n          zoom={13}\r\n          style={{ height: \"100%\", width: \"100%\" }}\r\n          whenCreated={(map) => (mapRef.current = map)}\r\n        >\r\n          <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n          <Marker position={[userLocation.lat, userLocation.lng]} icon={userIcon}>\r\n            <Popup>You are here</Popup>\r\n          </Marker>\r\n          {routeSpots.map((spot, i) => (\r\n            <Marker key={i} position={[spot.lat, spot.lng]} icon={poiIcon}>\r\n              <Popup>\r\n                <b>{spot.name}</b>\r\n                <br />\r\n                {poiDetails.find((p) => p.name === spot.name)?.description || \"No details available\"}\r\n              </Popup>\r\n            </Marker>\r\n          ))}\r\n          {segments.map((seg, i) => (\r\n            <Polyline key={i} positions={seg} color=\"blue\" weight={4} />\r\n          ))}\r\n        </MapContainer>\r\n      </div>\r\n      <div style={{ flex: 1, padding: 20, overflowY: \"auto\", background: \"#f5f5f5\" }}>\r\n        <h3 style={{ textAlign: \"center\" }}>Itinerary Details</h3>\r\n        <p>\r\n          <b>Mode:</b> {location.state?.transportMode}\r\n        </p>\r\n        <p>\r\n          <b>Start Time:</b> {new Date(location.state?.startTime).toLocaleString()}\r\n        </p>\r\n        <h4>Stops:</h4>\r\n        <ol>\r\n          {routeSpots.map((spot, i) => (\r\n            <li key={i}>{spot.name}</li>\r\n          ))}\r\n        </ol>\r\n        <button\r\n          onClick={saveItinerary}\r\n          disabled={saving || status === \"saved\"}\r\n          style={{\r\n            padding: \"10px 20px\",\r\n            background: status === \"saved\" ? \"#4caf50\" : \"#2196f3\",\r\n            color: \"#fff\",\r\n            border: \"none\",\r\n            borderRadius: 6,\r\n            cursor: \"pointer\",\r\n            width: \"100%\",\r\n            marginTop: 12,\r\n          }}\r\n        >\r\n          {saving ? \"Saving...\" : status === \"saved\" ? \"Saved\" : \"Save Itinerary\"}\r\n        </button>\r\n        {saveMessage && <p style={{ textAlign: \"center\", color: \"#333\" }}>{saveMessage}</p>}\r\n        <button\r\n          onClick={() => navigate(\"/\")}\r\n          style={{\r\n            padding: \"10px 20px\",\r\n            background: \"#aaa\",\r\n            color: \"#fff\",\r\n            border: \"none\",\r\n            borderRadius: 6,\r\n            cursor: \"pointer\",\r\n            width: \"100%\",\r\n            marginTop: 10,\r\n          }}\r\n        >\r\n          Back to Planner\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}