{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate,useLocation}from\"react-router-dom\";import LoginPage from\"./pages/LoginPage\";import SignupPage from\"./pages/SignupPage\";import HomePage from\"./pages/Home\";import MapPage from\"./pages/MapPage\";import NatureCulturePage from\"./pages/NatureCulture\";import EstablishmentsPage from\"./pages/Establishments\";import ProfilePage from\"./pages/profile\";import RouteDetails from\"./pages/RouteDetails\";import Navbar from\"./components/NavBar\";// Admin pages (make sure these are React components in .js files)\nimport AdminDashboard from\"./pages/admin/AdminDashboard\";import AdminPOIs from\"./pages/admin/AdminPOIs\";import AdminUsers from\"./pages/admin/AdminUsers\";import AdminPreferences from\"./pages/admin/AdminPreferences\";import AdminML from\"./pages/admin/AdminML\";import AdminReports from\"./pages/admin/AdminReports\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PathTracker(){const location=useLocation();useEffect(()=>{localStorage.setItem(\"lastPath\",location.pathname);},[location]);return null;}export default function App(){const[user,setUser]=useState(null);const[initialized,setInitialized]=useState(false);useEffect(()=>{const storedUser=localStorage.getItem(\"user\");if(storedUser)setUser(JSON.parse(storedUser));const lastPath=localStorage.getItem(\"lastPath\");const currentPath=window.location.pathname;if(lastPath&&currentPath===\"/\"){window.history.replaceState({},\"\",lastPath);}setInitialized(true);},[]);if(!initialized)return null;const isAdmin=(user===null||user===void 0?void 0:user.role)===\"admin\";const DefaultRedirect=()=>{if(!user)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});return isAdmin?/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/home\",replace:true});};return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(PathTracker,{}),user&&/*#__PURE__*/_jsx(Navbar,{user:user,setUser:setUser}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(DefaultRedirect,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!user?/*#__PURE__*/_jsx(LoginPage,{setUser:setUser}):/*#__PURE__*/_jsx(DefaultRedirect,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:!user?/*#__PURE__*/_jsx(SignupPage,{}):/*#__PURE__*/_jsx(DefaultRedirect,{})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:user?/*#__PURE__*/_jsx(HomePage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/mappage\",element:user?/*#__PURE__*/_jsx(MapPage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/natureculture\",element:user?/*#__PURE__*/_jsx(NatureCulturePage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/establishments\",element:user?/*#__PURE__*/_jsx(EstablishmentsPage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:user?/*#__PURE__*/_jsx(ProfilePage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/routedetails\",element:user?/*#__PURE__*/_jsx(RouteDetails,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/dashboard\",element:isAdmin?/*#__PURE__*/_jsx(AdminDashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/pois\",element:isAdmin?/*#__PURE__*/_jsx(AdminPOIs,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/users\",element:isAdmin?/*#__PURE__*/_jsx(AdminUsers,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/preferences\",element:isAdmin?/*#__PURE__*/_jsx(AdminPreferences,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/ml\",element:isAdmin?/*#__PURE__*/_jsx(AdminML,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/reports\",element:isAdmin?/*#__PURE__*/_jsx(AdminReports,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","useLocation","LoginPage","SignupPage","HomePage","MapPage","NatureCulturePage","EstablishmentsPage","ProfilePage","RouteDetails","Navbar","AdminDashboard","AdminPOIs","AdminUsers","AdminPreferences","AdminML","AdminReports","jsx","_jsx","jsxs","_jsxs","PathTracker","location","localStorage","setItem","pathname","App","user","setUser","initialized","setInitialized","storedUser","getItem","JSON","parse","lastPath","currentPath","window","history","replaceState","isAdmin","role","DefaultRedirect","to","replace","children","path","element"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/app.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Routes, Route, Navigate, useLocation } from \"react-router-dom\";\r\n\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport SignupPage from \"./pages/SignupPage\";\r\nimport HomePage from \"./pages/Home\";\r\nimport MapPage from \"./pages/MapPage\";\r\nimport NatureCulturePage from \"./pages/NatureCulture\";\r\nimport EstablishmentsPage from \"./pages/Establishments\";\r\nimport ProfilePage from \"./pages/profile\";\r\nimport RouteDetails from \"./pages/RouteDetails\";\r\nimport Navbar from \"./components/NavBar\";\r\n\r\n// Admin pages (make sure these are React components in .js files)\r\nimport AdminDashboard from \"./pages/admin/AdminDashboard\";\r\nimport AdminPOIs from \"./pages/admin/AdminPOIs\";\r\nimport AdminUsers from \"./pages/admin/AdminUsers\";\r\nimport AdminPreferences from \"./pages/admin/AdminPreferences\";\r\nimport AdminML from \"./pages/admin/AdminML\";\r\nimport AdminReports from \"./pages/admin/AdminReports\";\r\n\r\nfunction PathTracker() {\r\n  const location = useLocation();\r\n  useEffect(() => {\r\n    localStorage.setItem(\"lastPath\", location.pathname);\r\n  }, [location]);\r\n  return null;\r\n}\r\n\r\nexport default function App() {\r\n  const [user, setUser] = useState(null);\r\n  const [initialized, setInitialized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem(\"user\");\r\n    if (storedUser) setUser(JSON.parse(storedUser));\r\n\r\n    const lastPath = localStorage.getItem(\"lastPath\");\r\n    const currentPath = window.location.pathname;\r\n\r\n    if (lastPath && currentPath === \"/\") {\r\n      window.history.replaceState({}, \"\", lastPath);\r\n    }\r\n    setInitialized(true);\r\n  }, []);\r\n\r\n  if (!initialized) return null;\r\n\r\n  const isAdmin = user?.role === \"admin\";\r\n\r\n  const DefaultRedirect = () => {\r\n    if (!user) return <Navigate to=\"/login\" replace />;\r\n    return isAdmin ? <Navigate to=\"/admin/dashboard\" replace /> : <Navigate to=\"/home\" replace />;\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <PathTracker />\r\n      {user && <Navbar user={user} setUser={setUser} />}\r\n      <Routes>\r\n        <Route path=\"/\" element={<DefaultRedirect />} />\r\n        <Route path=\"/login\" element={!user ? <LoginPage setUser={setUser} /> : <DefaultRedirect />} />\r\n        <Route path=\"/signup\" element={!user ? <SignupPage /> : <DefaultRedirect />} />\r\n        <Route path=\"/home\" element={user ? <HomePage /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/mappage\" element={user ? <MapPage /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/natureculture\" element={user ? <NatureCulturePage /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/establishments\" element={user ? <EstablishmentsPage /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/profile\" element={user ? <ProfilePage /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/routedetails\" element={user ? <RouteDetails /> : <Navigate to=\"/login\" replace />} />\r\n\r\n        {/* Admin routes */}\r\n        <Route path=\"/admin/dashboard\" element={isAdmin ? <AdminDashboard /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/admin/pois\" element={isAdmin ? <AdminPOIs /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/admin/users\" element={isAdmin ? <AdminUsers /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/admin/preferences\" element={isAdmin ? <AdminPreferences /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/admin/ml\" element={isAdmin ? <AdminML /> : <Navigate to=\"/login\" replace />} />\r\n        <Route path=\"/admin/reports\" element={isAdmin ? <AdminReports /> : <Navigate to=\"/login\" replace />} />\r\n      </Routes>\r\n    </Router>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}