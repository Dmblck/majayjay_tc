{"ast":null,"code":"// src/pages/MapPage.js\nimport{useEffect,useState}from\"react\";import{MapContainer,TileLayer,Marker,Popup,useMap}from\"react-leaflet\";import\"leaflet/dist/leaflet.css\";import Papa from\"papaparse\";import spotsCSV from\"../data/spots.csv\";import L from\"leaflet\";// Fix marker icon issue\nimport iconUrl from\"leaflet/dist/images/marker-icon.png\";import iconShadow from\"leaflet/dist/images/marker-shadow.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DefaultIcon=L.icon({iconUrl,shadowUrl:iconShadow,iconSize:[25,41],iconAnchor:[12,41]});L.Marker.prototype.options.icon=DefaultIcon;// Auto fit bounds\nfunction FitBounds(_ref){let{spots}=_ref;const map=useMap();useEffect(()=>{if(spots.length){const bounds=spots.map(s=>[s.lat,s.lng]);map.fitBounds(bounds,{padding:[50,50]});}},[spots,map]);return null;}export default function MapPage(){const[spots,setSpots]=useState([]);useEffect(()=>{Papa.parse(spotsCSV,{download:true,header:true,skipEmptyLines:true,complete:res=>{const rows=res.data.filter(r=>r.name&&r.lat&&r.lng).map(r=>({name:r.name,lat:parseFloat(r.lat),lng:parseFloat(r.lng),description:r.description||\"No description available.\",tags:(r.tags||\"\").split(\",\").map(t=>t.trim()).filter(Boolean),visitors:r.visitors||\"Moderate\",image:r.image?r.image.startsWith(\"/images\")?r.image:\"/images/\".concat(r.image):null}));setSpots(rows);}});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-screen\",children:/*#__PURE__*/_jsxs(MapContainer,{center:[14.1461,121.4944]// fallback\n,zoom:13,style:{height:\"100%\",width:\"100%\"}// ðŸ‘ˆ important\n,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 OpenStreetMap contributors\"}),spots.map((spot,idx)=>{var _spot$tags;return/*#__PURE__*/_jsx(Marker,{position:[spot.lat,spot.lng],children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-lg\",children:spot.name}),spot.image&&/*#__PURE__*/_jsx(\"img\",{src:spot.image,alt:spot.name,className:\"w-40 h-28 object-cover mx-auto my-2 rounded-lg shadow\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:spot.description}),((_spot$tags=spot.tags)===null||_spot$tags===void 0?void 0:_spot$tags.length)>0&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Tags: \",spot.tags.join(\", \")]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-500\",children:[\"Visitors: \",spot.visitors]})]})})},idx);}),/*#__PURE__*/_jsx(FitBounds,{spots:spots})]})});}","map":{"version":3,"names":["useEffect","useState","MapContainer","TileLayer","Marker","Popup","useMap","Papa","spotsCSV","L","iconUrl","iconShadow","jsx","_jsx","jsxs","_jsxs","DefaultIcon","icon","shadowUrl","iconSize","iconAnchor","prototype","options","FitBounds","_ref","spots","map","length","bounds","s","lat","lng","fitBounds","padding","MapPage","setSpots","parse","download","header","skipEmptyLines","complete","res","rows","data","filter","r","name","parseFloat","description","tags","split","t","trim","Boolean","visitors","image","startsWith","concat","className","children","center","zoom","style","height","width","url","attribution","spot","idx","_spot$tags","position","src","alt","join"],"sources":["E:/IT/xampp/htdocs/Majayjay Tourism Circuit/src/pages/MapPage.js"],"sourcesContent":["  // src/pages/MapPage.js\r\n  import { useEffect, useState } from \"react\";\r\n  import { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\r\n  import \"leaflet/dist/leaflet.css\";\r\n  import Papa from \"papaparse\";\r\n  import spotsCSV from \"../data/spots.csv\";\r\n  import L from \"leaflet\";\r\n\r\n  // Fix marker icon issue\r\n  import iconUrl from \"leaflet/dist/images/marker-icon.png\";\r\n  import iconShadow from \"leaflet/dist/images/marker-shadow.png\";\r\n\r\n  const DefaultIcon = L.icon({\r\n    iconUrl,\r\n    shadowUrl: iconShadow,\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n  });\r\n  L.Marker.prototype.options.icon = DefaultIcon;\r\n\r\n  // Auto fit bounds\r\n  function FitBounds({ spots }) {\r\n    const map = useMap();\r\n    useEffect(() => {\r\n      if (spots.length) {\r\n        const bounds = spots.map((s) => [s.lat, s.lng]);\r\n        map.fitBounds(bounds, { padding: [50, 50] });\r\n      }\r\n    }, [spots, map]);\r\n    return null;\r\n  }\r\n\r\n  export default function MapPage() {\r\n    const [spots, setSpots] = useState([]);\r\n\r\n    useEffect(() => {\r\n      Papa.parse(spotsCSV, {\r\n        download: true,\r\n        header: true,\r\n        skipEmptyLines: true,\r\n        complete: (res) => {\r\n          const rows = res.data\r\n            .filter((r) => r.name && r.lat && r.lng)\r\n            .map((r) => ({\r\n              name: r.name,\r\n              lat: parseFloat(r.lat),\r\n              lng: parseFloat(r.lng),\r\n              description: r.description || \"No description available.\",\r\n              tags: (r.tags || \"\")\r\n                .split(\",\")\r\n                .map((t) => t.trim())\r\n                .filter(Boolean),\r\n              visitors: r.visitors || \"Moderate\",\r\n              image: r.image\r\n                ? r.image.startsWith(\"/images\")\r\n                  ? r.image\r\n                  : `/images/${r.image}`\r\n                : null,\r\n            }));\r\n\r\n          setSpots(rows);\r\n        },\r\n      });\r\n    }, []);\r\n\r\n    return (\r\n      <div className=\"w-full h-screen\">\r\n        {/* Make sure MapContainer has explicit height */}\r\n        <MapContainer\r\n          center={[14.1461, 121.4944]} // fallback\r\n          zoom={13}\r\n          style={{ height: \"100%\", width: \"100%\" }} // ðŸ‘ˆ important\r\n        >\r\n          <TileLayer\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            attribution=\"&copy; OpenStreetMap contributors\"\r\n          />\r\n\r\n          {spots.map((spot, idx) => (\r\n            <Marker key={idx} position={[spot.lat, spot.lng]}>\r\n              <Popup>\r\n                <div className=\"text-center\">\r\n                  <h2 className=\"font-bold text-lg\">{spot.name}</h2>\r\n                  {spot.image && (\r\n                    <img\r\n                      src={spot.image}\r\n                      alt={spot.name}\r\n                      className=\"w-40 h-28 object-cover mx-auto my-2 rounded-lg shadow\"\r\n                    />\r\n                  )}\r\n                  <p className=\"text-sm\">{spot.description}</p>\r\n                  {spot.tags?.length > 0 && (\r\n                    <p className=\"text-xs text-gray-500 mt-1\">\r\n                      Tags: {spot.tags.join(\", \")}\r\n                    </p>\r\n                  )}\r\n                  <p className=\"text-xs text-blue-500\">\r\n                    Visitors: {spot.visitors}\r\n                  </p>\r\n                </div>\r\n              </Popup>\r\n            </Marker>\r\n          ))}\r\n\r\n          <FitBounds spots={spots} />\r\n        </MapContainer>\r\n      </div>\r\n    );\r\n  }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}