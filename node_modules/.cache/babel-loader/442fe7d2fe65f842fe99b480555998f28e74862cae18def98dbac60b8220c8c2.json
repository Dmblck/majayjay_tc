{"ast":null,"code":"export function scorePOI(poi, routeInfo, weather, selectedCategories, mode) {\n  const {\n    distance\n  } = routeInfo;\n  const maxDistance = mode === \"foot-walking\" ? 3000 : mode === \"cycling-regular\" ? 10000 : 25000;\n  const distanceScore = Math.exp(-distance / maxDistance);\n  let weatherScore = 0.7;\n  if (weather) {\n    const condition = weather.weather[0].main;\n    if (condition === \"Clear\") weatherScore = 1.0;else if (condition === \"Clouds\") weatherScore = 0.8;else if (condition === \"Rain\") weatherScore = 0.4;else if (condition === \"Thunderstorm\") weatherScore = 0.2;else if (condition === \"Snow\") weatherScore = 0.5;\n  }\n  const preferenceScore = selectedCategories.includes(poi.category) ? 1 : 0;\n  const W_distance = 0.5;\n  const W_weather = 0.2;\n  const W_preference = 0.3;\n  return W_distance * distanceScore + W_weather * weatherScore + W_preference * preferenceScore;\n}\nexport async function recommendRoute(pois, currentLocation, selectedCategories, mode, getRouteInfo, getWeather) {\n  const scoredPOIs = [];\n  for (const poi of pois) {\n    try {\n      const routeInfo = await getRouteInfo(currentLocation, poi, mode);\n      if (!routeInfo) continue;\n      const weather = await getWeather(poi.lat, poi.lon);\n      const score = scorePOI(poi, routeInfo, weather, selectedCategories, mode);\n      scoredPOIs.push({\n        poi,\n        score,\n        routeInfo,\n        weather\n      });\n    } catch (error) {\n      console.error(\"Error scoring POI:\", error);\n    }\n  }\n  scoredPOIs.sort((a, b) => b.score - a.score);\n  return scoredPOIs;\n}","map":{"version":3,"names":["scorePOI","poi","routeInfo","weather","selectedCategories","mode","distance","maxDistance","distanceScore","Math","exp","weatherScore","condition","main","preferenceScore","includes","category","W_distance","W_weather","W_preference","recommendRoute","pois","currentLocation","getRouteInfo","getWeather","scoredPOIs","lat","lon","score","push","error","console","sort","a","b"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/services/scoringService.js"],"sourcesContent":["export function scorePOI(poi, routeInfo, weather, selectedCategories, mode) {\r\n  const { distance } = routeInfo;\r\n\r\n  const maxDistance =\r\n    mode === \"foot-walking\" ? 3000 :\r\n    mode === \"cycling-regular\" ? 10000 :\r\n    25000;\r\n  const distanceScore = Math.exp(-distance / maxDistance);\r\n\r\n  let weatherScore = 0.7;\r\n  if (weather) {\r\n    const condition = weather.weather[0].main;\r\n    if (condition === \"Clear\") weatherScore = 1.0;\r\n    else if (condition === \"Clouds\") weatherScore = 0.8;\r\n    else if (condition === \"Rain\") weatherScore = 0.4;\r\n    else if (condition === \"Thunderstorm\") weatherScore = 0.2;\r\n    else if (condition === \"Snow\") weatherScore = 0.5;\r\n  }\r\n\r\n  const preferenceScore = selectedCategories.includes(poi.category) ? 1 : 0;\r\n\r\n  const W_distance = 0.5;\r\n  const W_weather = 0.2;\r\n  const W_preference = 0.3;\r\n\r\n  return (\r\n    (W_distance * distanceScore) +\r\n    (W_weather * weatherScore) +\r\n    (W_preference * preferenceScore)\r\n  );\r\n}\r\n\r\nexport async function recommendRoute(\r\n  pois,\r\n  currentLocation,\r\n  selectedCategories,\r\n  mode,\r\n  getRouteInfo,\r\n  getWeather\r\n) {\r\n  const scoredPOIs = [];\r\n\r\n  for (const poi of pois) {\r\n    try {\r\n      const routeInfo = await getRouteInfo(currentLocation, poi, mode);\r\n      if (!routeInfo) continue;\r\n\r\n      const weather = await getWeather(poi.lat, poi.lon);\r\n\r\n      const score = scorePOI(poi, routeInfo, weather, selectedCategories, mode);\r\n\r\n      scoredPOIs.push({ poi, score, routeInfo, weather });\r\n    } catch (error) {\r\n      console.error(\"Error scoring POI:\", error);\r\n    }\r\n  }\r\n\r\n  scoredPOIs.sort((a, b) => b.score - a.score);\r\n\r\n  return scoredPOIs;\r\n}\r\n"],"mappings":"AAAA,OAAO,SAASA,QAAQA,CAACC,GAAG,EAAEC,SAAS,EAAEC,OAAO,EAAEC,kBAAkB,EAAEC,IAAI,EAAE;EAC1E,MAAM;IAAEC;EAAS,CAAC,GAAGJ,SAAS;EAE9B,MAAMK,WAAW,GACfF,IAAI,KAAK,cAAc,GAAG,IAAI,GAC9BA,IAAI,KAAK,iBAAiB,GAAG,KAAK,GAClC,KAAK;EACP,MAAMG,aAAa,GAAGC,IAAI,CAACC,GAAG,CAAC,CAACJ,QAAQ,GAAGC,WAAW,CAAC;EAEvD,IAAII,YAAY,GAAG,GAAG;EACtB,IAAIR,OAAO,EAAE;IACX,MAAMS,SAAS,GAAGT,OAAO,CAACA,OAAO,CAAC,CAAC,CAAC,CAACU,IAAI;IACzC,IAAID,SAAS,KAAK,OAAO,EAAED,YAAY,GAAG,GAAG,CAAC,KACzC,IAAIC,SAAS,KAAK,QAAQ,EAAED,YAAY,GAAG,GAAG,CAAC,KAC/C,IAAIC,SAAS,KAAK,MAAM,EAAED,YAAY,GAAG,GAAG,CAAC,KAC7C,IAAIC,SAAS,KAAK,cAAc,EAAED,YAAY,GAAG,GAAG,CAAC,KACrD,IAAIC,SAAS,KAAK,MAAM,EAAED,YAAY,GAAG,GAAG;EACnD;EAEA,MAAMG,eAAe,GAAGV,kBAAkB,CAACW,QAAQ,CAACd,GAAG,CAACe,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC;EAEzE,MAAMC,UAAU,GAAG,GAAG;EACtB,MAAMC,SAAS,GAAG,GAAG;EACrB,MAAMC,YAAY,GAAG,GAAG;EAExB,OACGF,UAAU,GAAGT,aAAa,GAC1BU,SAAS,GAAGP,YAAa,GACzBQ,YAAY,GAAGL,eAAgB;AAEpC;AAEA,OAAO,eAAeM,cAAcA,CAClCC,IAAI,EACJC,eAAe,EACflB,kBAAkB,EAClBC,IAAI,EACJkB,YAAY,EACZC,UAAU,EACV;EACA,MAAMC,UAAU,GAAG,EAAE;EAErB,KAAK,MAAMxB,GAAG,IAAIoB,IAAI,EAAE;IACtB,IAAI;MACF,MAAMnB,SAAS,GAAG,MAAMqB,YAAY,CAACD,eAAe,EAAErB,GAAG,EAAEI,IAAI,CAAC;MAChE,IAAI,CAACH,SAAS,EAAE;MAEhB,MAAMC,OAAO,GAAG,MAAMqB,UAAU,CAACvB,GAAG,CAACyB,GAAG,EAAEzB,GAAG,CAAC0B,GAAG,CAAC;MAElD,MAAMC,KAAK,GAAG5B,QAAQ,CAACC,GAAG,EAAEC,SAAS,EAAEC,OAAO,EAAEC,kBAAkB,EAAEC,IAAI,CAAC;MAEzEoB,UAAU,CAACI,IAAI,CAAC;QAAE5B,GAAG;QAAE2B,KAAK;QAAE1B,SAAS;QAAEC;MAAQ,CAAC,CAAC;IACrD,CAAC,CAAC,OAAO2B,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC5C;EACF;EAEAL,UAAU,CAACO,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACN,KAAK,GAAGK,CAAC,CAACL,KAAK,CAAC;EAE5C,OAAOH,UAAU;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}