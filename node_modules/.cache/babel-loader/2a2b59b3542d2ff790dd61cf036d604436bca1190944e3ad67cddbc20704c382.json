{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{MapContainer,TileLayer,Marker,Popup,Polyline}from\"react-leaflet\";import\"leaflet/dist/leaflet.css\";import L from\"leaflet\";import{useNavigate,useLocation}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RouteDetails(){var _location$state,_location$state2,_location$state5,_location$state6;const location=useLocation();const navigate=useNavigate();const routeSpots=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.itinerary)||[];const[segments,setSegments]=useState([]);const[loading,setLoading]=useState(false);const[poiDetails,setPoiDetails]=useState([]);const[saving,setSaving]=useState(false);const[saveMessage,setSaveMessage]=useState(\"\");const[status,setStatus]=useState(\"pending\");const[userLocation,setUserLocation]=useState((_location$state2=location.state)!==null&&_location$state2!==void 0&&_location$state2.startPoint?{lat:location.state.startPoint.lat,lng:location.state.startPoint.lng}:null);const mapRef=useRef(null);const ORS_API_KEY=\"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImJhNWU3NmIxOTRmMzQyYTg4NzY4MDc2MzVmZDY1ZDRhIiwiaCI6Im11cm11cjY0In0=\";useEffect(()=>{if(userLocation&&mapRef.current){try{mapRef.current.setView([userLocation.lat,userLocation.lng],14,{animate:true});}catch(_unused){}}},[userLocation]);useEffect(()=>{if(!(\"geolocation\"in navigator)){setUserLocation({lat:14.1461,lng:121.5012});return;}const watchId=navigator.geolocation.watchPosition(pos=>{const{latitude,longitude}=pos.coords;const loc={lat:latitude,lng:longitude};setUserLocation(loc);if(mapRef.current){try{mapRef.current.setView([latitude,longitude],14,{animate:true});}catch(_unused2){}}},err=>{console.warn(\"Geolocation error:\",err.message);setUserLocation({lat:14.1461,lng:121.5012});},{enableHighAccuracy:true,timeout:10000,maximumAge:0});return()=>navigator.geolocation.clearWatch(watchId);},[]);const fetchRouteSegment=async function(from,to){let mode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"driving-car\";try{var _data$features;const res=await fetch(\"https://api.openrouteservice.org/v2/directions/\".concat(mode),{method:\"POST\",headers:{Authorization:ORS_API_KEY,\"Content-Type\":\"application/json\"},body:JSON.stringify({coordinates:[[from.lng,from.lat],[to.lng,to.lat]]})});const data=await res.json();if(!((_data$features=data.features)!==null&&_data$features!==void 0&&_data$features.length))return[];const coords=data.features[0].geometry.coordinates.map(_ref=>{let[lng,lat]=_ref;return[lat,lng];});return coords;}catch(err){console.error(\"ORS fetch error:\",err);return[];}};const fetchPOIDetails=async(lat,lng)=>{try{const res=await fetch(\"http://localhost:5000/api/pois/near?lat=\".concat(lat,\"&lng=\").concat(lng));if(!res.ok)throw new Error(\"POI fetch failed\");const data=await res.json();return data;}catch(_unused3){return[];}};useEffect(()=>{let cancelled=false;const loadData=async()=>{if(!userLocation)return;setLoading(true);const points=[userLocation,...routeSpots];const newSegments=[];for(let i=0;i<points.length-1;i++){if(cancelled)return;const coords=await fetchRouteSegment(points[i],points[i+1]);newSegments.push(coords);}if(cancelled)return;setSegments(newSegments);const poiFetches=await Promise.all(routeSpots.map(spot=>fetchPOIDetails(spot.lat,spot.lng)));if(cancelled)return;setPoiDetails(poiFetches.flat());setLoading(false);};loadData();return()=>{cancelled=true;};},[userLocation,routeSpots]);const saveItinerary=async()=>{var _location$state3,_location$state4;setSaving(true);const storedUser=JSON.parse(localStorage.getItem(\"user\"));if(!storedUser||!storedUser.id){alert(\"Please log in first.\");setSaving(false);return;}const itineraryData={user_id:storedUser.id,name:\"Trip - \".concat(new Date().toLocaleString()),transport_mode:((_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.transportMode)||\"driving-car\",start_time:((_location$state4=location.state)===null||_location$state4===void 0?void 0:_location$state4.startTime)||new Date().toISOString(),start_lat:userLocation===null||userLocation===void 0?void 0:userLocation.lat,start_lng:userLocation===null||userLocation===void 0?void 0:userLocation.lng,points:routeSpots,status:\"saved\"};try{const res=await fetch(\"http://localhost:5000/api/itineraries/save\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(itineraryData)});if(res.ok){setSaveMessage(\"Itinerary saved successfully!\");setStatus(\"saved\");}else{setSaveMessage(\"Failed to save itinerary.\");}}catch(_unused4){setSaveMessage(\"Error saving itinerary.\");}setSaving(false);setTimeout(()=>setSaveMessage(\"\"),3000);};const userIcon=new L.Icon({iconUrl:\"https://cdn-icons-png.flaticon.com/512/149/149060.png\",iconSize:[32,32]});const poiIcon=new L.Icon({iconUrl:\"https://cdn-icons-png.flaticon.com/512/854/854878.png\",iconSize:[28,28]});if(!userLocation)return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",marginTop:50},children:\"Loading location...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",height:\"100vh\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:3},children:/*#__PURE__*/_jsxs(MapContainer,{center:[userLocation.lat,userLocation.lng],zoom:13,style:{height:\"100%\",width:\"100%\"},whenCreated:map=>mapRef.current=map,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(Marker,{position:[userLocation.lat,userLocation.lng],icon:userIcon,children:/*#__PURE__*/_jsx(Popup,{children:\"You are here\"})}),routeSpots.map((spot,i)=>{var _poiDetails$find;return/*#__PURE__*/_jsx(Marker,{position:[spot.lat,spot.lng],icon:poiIcon,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"b\",{children:spot.name}),/*#__PURE__*/_jsx(\"br\",{}),((_poiDetails$find=poiDetails.find(p=>p.name===spot.name))===null||_poiDetails$find===void 0?void 0:_poiDetails$find.description)||\"No details available\"]})},i);}),segments.map((seg,i)=>/*#__PURE__*/_jsx(Polyline,{positions:seg,color:\"blue\",weight:4},i))]})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,padding:20,overflowY:\"auto\",background:\"#f5f5f5\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:\"center\"},children:\"Itinerary Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Mode:\"}),\" \",(_location$state5=location.state)===null||_location$state5===void 0?void 0:_location$state5.transportMode]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Start Time:\"}),\" \",(_location$state6=location.state)!==null&&_location$state6!==void 0&&_location$state6.startTime?new Date(location.state.startTime).toLocaleString():\"N/A\"]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Stops:\"}),/*#__PURE__*/_jsx(\"ol\",{children:routeSpots.map((spot,i)=>/*#__PURE__*/_jsx(\"li\",{children:spot.name},i))}),/*#__PURE__*/_jsx(\"button\",{onClick:saveItinerary,disabled:saving||status===\"saved\",style:{padding:\"10px 20px\",background:status===\"saved\"?\"#4caf50\":\"#2196f3\",color:\"#fff\",border:\"none\",borderRadius:6,cursor:\"pointer\",width:\"100%\",marginTop:12},children:saving?\"Saving...\":status===\"saved\"?\"Saved\":\"Save Itinerary\"}),saveMessage&&/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\",color:\"#333\"},children:saveMessage}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),style:{padding:\"10px 20px\",background:\"#aaa\",color:\"#fff\",border:\"none\",borderRadius:6,cursor:\"pointer\",width:\"100%\",marginTop:10},children:\"Back to Planner\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","MapContainer","TileLayer","Marker","Popup","Polyline","L","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","RouteDetails","_location$state","_location$state2","_location$state5","_location$state6","location","navigate","routeSpots","state","itinerary","segments","setSegments","loading","setLoading","poiDetails","setPoiDetails","saving","setSaving","saveMessage","setSaveMessage","status","setStatus","userLocation","setUserLocation","startPoint","lat","lng","mapRef","ORS_API_KEY","current","setView","animate","_unused","navigator","watchId","geolocation","watchPosition","pos","latitude","longitude","coords","loc","_unused2","err","console","warn","message","enableHighAccuracy","timeout","maximumAge","clearWatch","fetchRouteSegment","from","to","mode","arguments","length","undefined","_data$features","res","fetch","concat","method","headers","Authorization","body","JSON","stringify","coordinates","data","json","features","geometry","map","_ref","error","fetchPOIDetails","ok","Error","_unused3","cancelled","loadData","points","newSegments","i","push","poiFetches","Promise","all","spot","flat","saveItinerary","_location$state3","_location$state4","storedUser","parse","localStorage","getItem","id","alert","itineraryData","user_id","name","Date","toLocaleString","transport_mode","transportMode","start_time","startTime","toISOString","start_lat","start_lng","_unused4","setTimeout","userIcon","Icon","iconUrl","iconSize","poiIcon","style","textAlign","marginTop","children","display","height","flex","center","zoom","width","whenCreated","url","position","icon","_poiDetails$find","find","p","description","seg","positions","color","weight","padding","overflowY","background","onClick","disabled","border","borderRadius","cursor"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/components/RoutePlanner.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport L from \"leaflet\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\n\r\nexport default function RouteDetails() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const routeSpots = location.state?.itinerary || [];\r\n  const [segments, setSegments] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [poiDetails, setPoiDetails] = useState([]);\r\n  const [saving, setSaving] = useState(false);\r\n  const [saveMessage, setSaveMessage] = useState(\"\");\r\n  const [status, setStatus] = useState(\"pending\");\r\n  const [userLocation, setUserLocation] = useState(\r\n    location.state?.startPoint ? { lat: location.state.startPoint.lat, lng: location.state.startPoint.lng } : null\r\n  );\r\n  const mapRef = useRef(null);\r\n\r\n  const ORS_API_KEY =\r\n    \"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImJhNWU3NmIxOTRmMzQyYTg4NzY4MDc2MzVmZDY1ZDRhIiwiaCI6Im11cm11cjY0In0=\";\r\n\r\n  useEffect(() => {\r\n    if (userLocation && mapRef.current) {\r\n      try {\r\n        mapRef.current.setView([userLocation.lat, userLocation.lng], 14, { animate: true });\r\n      } catch {}\r\n    }\r\n  }, [userLocation]);\r\n\r\n  useEffect(() => {\r\n    if (!(\"geolocation\" in navigator)) {\r\n      setUserLocation({ lat: 14.1461, lng: 121.5012 });\r\n      return;\r\n    }\r\n    const watchId = navigator.geolocation.watchPosition(\r\n      (pos) => {\r\n        const { latitude, longitude } = pos.coords;\r\n        const loc = { lat: latitude, lng: longitude };\r\n        setUserLocation(loc);\r\n        if (mapRef.current) {\r\n          try {\r\n            mapRef.current.setView([latitude, longitude], 14, { animate: true });\r\n          } catch {}\r\n        }\r\n      },\r\n      (err) => {\r\n        console.warn(\"Geolocation error:\", err.message);\r\n        setUserLocation({ lat: 14.1461, lng: 121.5012 });\r\n      },\r\n      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }\r\n    );\r\n    return () => navigator.geolocation.clearWatch(watchId);\r\n  }, []);\r\n\r\n  const fetchRouteSegment = async (from, to, mode = \"driving-car\") => {\r\n    try {\r\n      const res = await fetch(`https://api.openrouteservice.org/v2/directions/${mode}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: ORS_API_KEY,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ coordinates: [[from.lng, from.lat], [to.lng, to.lat]] }),\r\n      });\r\n      const data = await res.json();\r\n      if (!data.features?.length) return [];\r\n      const coords = data.features[0].geometry.coordinates.map(([lng, lat]) => [lat, lng]);\r\n      return coords;\r\n    } catch (err) {\r\n      console.error(\"ORS fetch error:\", err);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const fetchPOIDetails = async (lat, lng) => {\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/api/pois/near?lat=${lat}&lng=${lng}`);\r\n      if (!res.ok) throw new Error(\"POI fetch failed\");\r\n      const data = await res.json();\r\n      return data;\r\n    } catch {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const loadData = async () => {\r\n      if (!userLocation) return;\r\n      setLoading(true);\r\n      const points = [userLocation, ...routeSpots];\r\n      const newSegments = [];\r\n      for (let i = 0; i < points.length - 1; i++) {\r\n        if (cancelled) return;\r\n        const coords = await fetchRouteSegment(points[i], points[i + 1]);\r\n        newSegments.push(coords);\r\n      }\r\n      if (cancelled) return;\r\n      setSegments(newSegments);\r\n      const poiFetches = await Promise.all(routeSpots.map((spot) => fetchPOIDetails(spot.lat, spot.lng)));\r\n      if (cancelled) return;\r\n      setPoiDetails(poiFetches.flat());\r\n      setLoading(false);\r\n    };\r\n    loadData();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [userLocation, routeSpots]);\r\n\r\n  const saveItinerary = async () => {\r\n    setSaving(true);\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (!storedUser || !storedUser.id) {\r\n      alert(\"Please log in first.\");\r\n      setSaving(false);\r\n      return;\r\n    }\r\n    const itineraryData = {\r\n      user_id: storedUser.id,\r\n      name: `Trip - ${new Date().toLocaleString()}`,\r\n      transport_mode: location.state?.transportMode || \"driving-car\",\r\n      start_time: location.state?.startTime || new Date().toISOString(),\r\n      start_lat: userLocation?.lat,\r\n      start_lng: userLocation?.lng,\r\n      points: routeSpots,\r\n      status: \"saved\",\r\n    };\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/itineraries/save\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(itineraryData),\r\n      });\r\n      if (res.ok) {\r\n        setSaveMessage(\"Itinerary saved successfully!\");\r\n        setStatus(\"saved\");\r\n      } else {\r\n        setSaveMessage(\"Failed to save itinerary.\");\r\n      }\r\n    } catch {\r\n      setSaveMessage(\"Error saving itinerary.\");\r\n    }\r\n    setSaving(false);\r\n    setTimeout(() => setSaveMessage(\"\"), 3000);\r\n  };\r\n\r\n  const userIcon = new L.Icon({\r\n    iconUrl: \"https://cdn-icons-png.flaticon.com/512/149/149060.png\",\r\n    iconSize: [32, 32],\r\n  });\r\n\r\n  const poiIcon = new L.Icon({\r\n    iconUrl: \"https://cdn-icons-png.flaticon.com/512/854/854878.png\",\r\n    iconSize: [28, 28],\r\n  });\r\n\r\n  if (!userLocation) return <div style={{ textAlign: \"center\", marginTop: 50 }}>Loading location...</div>;\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", height: \"100vh\" }}>\r\n      <div style={{ flex: 3 }}>\r\n        <MapContainer\r\n          center={[userLocation.lat, userLocation.lng]}\r\n          zoom={13}\r\n          style={{ height: \"100%\", width: \"100%\" }}\r\n          whenCreated={(map) => (mapRef.current = map)}\r\n        >\r\n          <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n          <Marker position={[userLocation.lat, userLocation.lng]} icon={userIcon}>\r\n            <Popup>You are here</Popup>\r\n          </Marker>\r\n          {routeSpots.map((spot, i) => (\r\n            <Marker key={i} position={[spot.lat, spot.lng]} icon={poiIcon}>\r\n              <Popup>\r\n                <b>{spot.name}</b>\r\n                <br />\r\n                {poiDetails.find((p) => p.name === spot.name)?.description || \"No details available\"}\r\n              </Popup>\r\n            </Marker>\r\n          ))}\r\n          {segments.map((seg, i) => (\r\n            <Polyline key={i} positions={seg} color=\"blue\" weight={4} />\r\n          ))}\r\n        </MapContainer>\r\n      </div>\r\n      <div style={{ flex: 1, padding: 20, overflowY: \"auto\", background: \"#f5f5f5\" }}>\r\n        <h3 style={{ textAlign: \"center\" }}>Itinerary Details</h3>\r\n        <p>\r\n          <b>Mode:</b> {location.state?.transportMode}\r\n        </p>\r\n        <p>\r\n          <b>Start Time:</b> {location.state?.startTime ? new Date(location.state.startTime).toLocaleString() : \"N/A\"}\r\n        </p>\r\n        <h4>Stops:</h4>\r\n        <ol>\r\n          {routeSpots.map((spot, i) => (\r\n            <li key={i}>{spot.name}</li>\r\n          ))}\r\n        </ol>\r\n        <button\r\n          onClick={saveItinerary}\r\n          disabled={saving || status === \"saved\"}\r\n          style={{\r\n            padding: \"10px 20px\",\r\n            background: status === \"saved\" ? \"#4caf50\" : \"#2196f3\",\r\n            color: \"#fff\",\r\n            border: \"none\",\r\n            borderRadius: 6,\r\n            cursor: \"pointer\",\r\n            width: \"100%\",\r\n            marginTop: 12,\r\n          }}\r\n        >\r\n          {saving ? \"Saving...\" : status === \"saved\" ? \"Saved\" : \"Save Itinerary\"}\r\n        </button>\r\n        {saveMessage && <p style={{ textAlign: \"center\", color: \"#333\" }}>{saveMessage}</p>}\r\n        <button\r\n          onClick={() => navigate(\"/\")}\r\n          style={{\r\n            padding: \"10px 20px\",\r\n            background: \"#aaa\",\r\n            color: \"#fff\",\r\n            border: \"none\",\r\n            borderRadius: 6,\r\n            cursor: \"pointer\",\r\n            width: \"100%\",\r\n            marginTop: 10,\r\n          }}\r\n        >\r\n          Back to Planner\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}