{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminPreferences(){const[rankedPrefs,setRankedPrefs]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetch(\"http://localhost:5000/api/users\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(res=>res.json()).then(users=>{const counts={};users.forEach(user=>{if(user.preferences&&user.preferences.length){user.preferences.forEach(pref=>{counts[pref]=(counts[pref]||0)+1;});}});const ranked=Object.entries(counts).map(_ref=>{let[pref,count]=_ref;return{preference:pref,count};}).sort((a,b)=>b.count-a.count);setRankedPrefs(ranked);setLoading(false);}).catch(err=>{console.error(\"Error fetching users:\",err);setLoading(false);});},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:220,padding:30,fontFamily:\"'Poppins', sans-serif\",background:\"linear-gradient(180deg, #f4faf4 0%, #ffffff 100%)\",minHeight:\"100vh\",color:\"#2f3e2f\",transition:\"all 0.3s ease\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"2rem\",color:\"#2b593f\",marginBottom:\"25px\",textShadow:\"1px 1px 2px rgba(43, 89, 63, 0.2)\",fontWeight:700},children:\"Most Common Preferences\"}),loading?/*#__PURE__*/_jsx(\"p\",{style:{color:\"#6b8061\",fontStyle:\"italic\",fontSize:\"1.1rem\"},children:\"Loading...\"}):rankedPrefs.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:\"#6b8061\",fontStyle:\"italic\",fontSize:\"1.1rem\"},children:\"No preferences found.\"}):/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"#ffffff\",borderRadius:\"16px\",boxShadow:\"0 6px 20px rgba(50, 100, 70, 0.1)\",width:\"80%\",overflow:\"hidden\",transition:\"transform 0.3s ease\"},onMouseEnter:e=>e.currentTarget.style.transform=\"translateY(-3px)\",onMouseLeave:e=>e.currentTarget.style.transform=\"translateY(0)\",children:/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\",borderCollapse:\"collapse\",borderRadius:\"12px\",overflow:\"hidden\",fontSize:\"1.1rem\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:\"#7ebc85\",color:\"#fff\"},children:[/*#__PURE__*/_jsx(\"th\",{style:{border:\"none\",padding:\"16px\",textAlign:\"left\",fontWeight:\"600\",letterSpacing:\"0.5px\"},children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:\"none\",padding:\"16px\",textAlign:\"left\",fontWeight:\"600\",letterSpacing:\"0.5px\"},children:\"Preference\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:\"none\",padding:\"16px\",textAlign:\"left\",fontWeight:\"600\",letterSpacing:\"0.5px\"},children:\"Count\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rankedPrefs.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:index%2===0?\"#f3f8f3\":\"#ffffff\",transition:\"background-color 0.3s ease\"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=\"#e8f3e8\",onMouseLeave:e=>e.currentTarget.style.backgroundColor=index%2===0?\"#f3f8f3\":\"#ffffff\",children:[/*#__PURE__*/_jsx(\"td\",{style:{borderBottom:\"1px solid #d9e4d6\",padding:\"14px 16px\",color:\"#2f3e2f\",fontWeight:\"600\"},children:index+1}),/*#__PURE__*/_jsx(\"td\",{style:{borderBottom:\"1px solid #d9e4d6\",padding:\"14px 16px\",color:\"#345c34\"},children:item.preference}),/*#__PURE__*/_jsx(\"td\",{style:{borderBottom:\"1px solid #d9e4d6\",padding:\"14px 16px\",color:\"#4b7d4b\",fontWeight:\"500\"},children:item.count})]},item.preference))})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AdminPreferences","rankedPrefs","setRankedPrefs","loading","setLoading","fetch","headers","Authorization","concat","localStorage","getItem","then","res","json","users","counts","forEach","user","preferences","length","pref","ranked","Object","entries","map","_ref","count","preference","sort","a","b","catch","err","console","error","style","marginLeft","padding","fontFamily","background","minHeight","color","transition","children","fontSize","marginBottom","textShadow","fontWeight","fontStyle","backgroundColor","borderRadius","boxShadow","width","overflow","onMouseEnter","e","currentTarget","transform","onMouseLeave","borderCollapse","border","textAlign","letterSpacing","item","index","borderBottom"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/pages/admin/AdminPreferences.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nexport default function AdminPreferences() {\r\n  const [rankedPrefs, setRankedPrefs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/users\", {\r\n      headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((users) => {\r\n        const counts = {};\r\n        users.forEach((user) => {\r\n          if (user.preferences && user.preferences.length) {\r\n            user.preferences.forEach((pref) => {\r\n              counts[pref] = (counts[pref] || 0) + 1;\r\n            });\r\n          }\r\n        });\r\n\r\n        const ranked = Object.entries(counts)\r\n          .map(([pref, count]) => ({ preference: pref, count }))\r\n          .sort((a, b) => b.count - a.count);\r\n\r\n        setRankedPrefs(ranked);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Error fetching users:\", err);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        marginLeft: 220,\r\n        padding: 30,\r\n        fontFamily: \"'Poppins', sans-serif\",\r\n        background: \"linear-gradient(180deg, #f4faf4 0%, #ffffff 100%)\",\r\n        minHeight: \"100vh\",\r\n        color: \"#2f3e2f\",\r\n        transition: \"all 0.3s ease\",\r\n      }}\r\n    >\r\n      <h2\r\n        style={{\r\n          fontSize: \"2rem\",\r\n          color: \"#2b593f\",\r\n          marginBottom: \"25px\",\r\n          textShadow: \"1px 1px 2px rgba(43, 89, 63, 0.2)\",\r\n          fontWeight: 700,\r\n        }}\r\n      >\r\n        Most Common Preferences\r\n      </h2>\r\n\r\n      {loading ? (\r\n        <p style={{ color: \"#6b8061\", fontStyle: \"italic\", fontSize: \"1.1rem\" }}>\r\n          Loading...\r\n        </p>\r\n      ) : rankedPrefs.length === 0 ? (\r\n        <p style={{ color: \"#6b8061\", fontStyle: \"italic\", fontSize: \"1.1rem\" }}>\r\n          No preferences found.\r\n        </p>\r\n      ) : (\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#ffffff\",\r\n            borderRadius: \"16px\",\r\n            boxShadow: \"0 6px 20px rgba(50, 100, 70, 0.1)\",\r\n            width: \"80%\",\r\n            overflow: \"hidden\",\r\n            transition: \"transform 0.3s ease\",\r\n          }}\r\n          onMouseEnter={(e) => (e.currentTarget.style.transform = \"translateY(-3px)\")}\r\n          onMouseLeave={(e) => (e.currentTarget.style.transform = \"translateY(0)\")}\r\n        >\r\n          <table\r\n            style={{\r\n              width: \"100%\",\r\n              borderCollapse: \"collapse\",\r\n              borderRadius: \"12px\",\r\n              overflow: \"hidden\",\r\n              fontSize: \"1.1rem\",\r\n            }}\r\n          >\r\n            <thead>\r\n              <tr style={{ backgroundColor: \"#7ebc85\", color: \"#fff\" }}>\r\n                <th\r\n                  style={{\r\n                    border: \"none\",\r\n                    padding: \"16px\",\r\n                    textAlign: \"left\",\r\n                    fontWeight: \"600\",\r\n                    letterSpacing: \"0.5px\",\r\n                  }}\r\n                >\r\n                  Rank\r\n                </th>\r\n                <th\r\n                  style={{\r\n                    border: \"none\",\r\n                    padding: \"16px\",\r\n                    textAlign: \"left\",\r\n                    fontWeight: \"600\",\r\n                    letterSpacing: \"0.5px\",\r\n                  }}\r\n                >\r\n                  Preference\r\n                </th>\r\n                <th\r\n                  style={{\r\n                    border: \"none\",\r\n                    padding: \"16px\",\r\n                    textAlign: \"left\",\r\n                    fontWeight: \"600\",\r\n                    letterSpacing: \"0.5px\",\r\n                  }}\r\n                >\r\n                  Count\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {rankedPrefs.map((item, index) => (\r\n                <tr\r\n                  key={item.preference}\r\n                  style={{\r\n                    backgroundColor: index % 2 === 0 ? \"#f3f8f3\" : \"#ffffff\",\r\n                    transition: \"background-color 0.3s ease\",\r\n                  }}\r\n                  onMouseEnter={(e) =>\r\n                    (e.currentTarget.style.backgroundColor = \"#e8f3e8\")\r\n                  }\r\n                  onMouseLeave={(e) =>\r\n                    (e.currentTarget.style.backgroundColor =\r\n                      index % 2 === 0 ? \"#f3f8f3\" : \"#ffffff\")\r\n                  }\r\n                >\r\n                  <td\r\n                    style={{\r\n                      borderBottom: \"1px solid #d9e4d6\",\r\n                      padding: \"14px 16px\",\r\n                      color: \"#2f3e2f\",\r\n                      fontWeight: \"600\",\r\n                    }}\r\n                  >\r\n                    {index + 1}\r\n                  </td>\r\n                  <td\r\n                    style={{\r\n                      borderBottom: \"1px solid #d9e4d6\",\r\n                      padding: \"14px 16px\",\r\n                      color: \"#345c34\",\r\n                    }}\r\n                  >\r\n                    {item.preference}\r\n                  </td>\r\n                  <td\r\n                    style={{\r\n                      borderBottom: \"1px solid #d9e4d6\",\r\n                      padding: \"14px 16px\",\r\n                      color: \"#4b7d4b\",\r\n                      fontWeight: \"500\",\r\n                    }}\r\n                  >\r\n                    {item.count}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}