{"ast":null,"code":"import React,{useEffect,useMemo,useState}from\"react\";import{MapContainer,TileLayer,Marker,Popup}from\"react-leaflet\";import\"leaflet/dist/leaflet.css\";import\"../leafletfix\";import Papa from\"papaparse\";import spotsCSV from\"../data/spots.csv\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const CENTER={lat:14.1467,lng:121.4708};export default function Home(){const[spots,setSpots]=useState([]);useEffect(()=>{Papa.parse(spotsCSV,{download:true,header:true,complete:res=>{const rows=res.data.filter(r=>r.name&&r.lat&&r.lng).map(r=>({name:r.name,lat:parseFloat(r.lat),lng:parseFloat(r.lng),visitors:r.visitors||\"Moderate\",image:r.image||\"\"}));setSpots(rows);}});},[]);const topSpots=useMemo(()=>{const order={\"Very High\":3,High:2,Moderate:1,Low:0};return[...spots].sort((a,b)=>(order[b.visitors]||0)-(order[a.visitors]||0)).slice(0,5);},[spots]);return/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",style:{display:\"grid\",gap:16,gridTemplateColumns:\"1fr 1fr\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:\"0 0 8px\"},children:\"Majayjay Overview\"}),/*#__PURE__*/_jsx(\"div\",{className:\"map-wrap\",style:{height:\"500px\"},children:/*#__PURE__*/_jsxs(MapContainer,{center:CENTER,zoom:13,className:\"h-full w-full\",style:{height:\"100%\",width:\"100%\"},children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/\\\">OSM contributors</a>\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),topSpots.map((s,i)=>/*#__PURE__*/_jsx(Marker,{position:[s.lat,s.lng],children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"strong\",{children:s.name}),/*#__PURE__*/_jsx(\"br\",{}),\"Visitors: \",s.visitors,s.image&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{src:\"/images/\".concat(s.image)// ðŸ‘ˆ must be in public/images/\n,alt:s.name,style:{width:\"150px\",borderRadius:\"8px\",marginTop:\"4px\"}})]})]})},i))]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:\"0 0 8px\"},children:\"Most Visited Places\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{margin:0,paddingLeft:18},children:[topSpots.map((s,i)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:s.name}),\" \\u2014 \",s.visitors,\" visitors\"]},i)),topSpots.length===0&&/*#__PURE__*/_jsx(\"li\",{children:\"No spots found in spots.csv\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","MapContainer","TileLayer","Marker","Popup","Papa","spotsCSV","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CENTER","lat","lng","Home","spots","setSpots","parse","download","header","complete","res","rows","data","filter","r","name","map","parseFloat","visitors","image","topSpots","order","High","Moderate","Low","sort","a","b","slice","className","style","display","gap","gridTemplateColumns","children","margin","height","center","zoom","width","attribution","url","s","i","position","src","concat","alt","borderRadius","marginTop","paddingLeft","length"],"sources":["E:/IT/xampp/htdocs/Majayjay Tourism Circuit/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"../leafletfix\";\r\nimport Papa from \"papaparse\";\r\n\r\nimport spotsCSV from \"../data/spots.csv\";\r\n\r\nconst CENTER = { lat: 14.1467, lng: 121.4708 };\r\n\r\nexport default function Home() {\r\n  const [spots, setSpots] = useState([]);\r\n\r\n  useEffect(() => {\r\n    Papa.parse(spotsCSV, {\r\n      download: true,\r\n      header: true,\r\n      complete: (res) => {\r\n        const rows = res.data\r\n          .filter((r) => r.name && r.lat && r.lng)\r\n          .map((r) => ({\r\n            name: r.name,\r\n            lat: parseFloat(r.lat),\r\n            lng: parseFloat(r.lng),\r\n            visitors: r.visitors || \"Moderate\",\r\n            image: r.image || \"\", \r\n          }));\r\n        setSpots(rows);\r\n      },\r\n    });\r\n  }, []);\r\n\r\n  const topSpots = useMemo(() => {\r\n    const order = { \"Very High\": 3, High: 2, Moderate: 1, Low: 0 };\r\n    return [...spots]\r\n      .sort((a, b) => (order[b.visitors] || 0) - (order[a.visitors] || 0))\r\n      .slice(0, 5);\r\n  }, [spots]);\r\n\r\n  return (\r\n    <div className=\"grid\" style={{ display: \"grid\", gap: 16, gridTemplateColumns: \"1fr 1fr\" }}>\r\n      <div className=\"card\">\r\n        <h2 style={{ margin: \"0 0 8px\" }}>Majayjay Overview</h2>\r\n        <div className=\"map-wrap\" style={{ height: \"500px\" }}>\r\n          <MapContainer\r\n            center={CENTER}\r\n            zoom={13}\r\n            className=\"h-full w-full\"\r\n            style={{ height: \"100%\", width: \"100%\" }}\r\n          >\r\n            <TileLayer\r\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/\">OSM contributors</a>'\r\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n            {topSpots.map((s, i) => (\r\n              <Marker key={i} position={[s.lat, s.lng]}>\r\n                <Popup>\r\n                  <strong>{s.name}</strong>\r\n                  <br />\r\n                  Visitors: {s.visitors}\r\n                  {s.image && (\r\n                    <>\r\n                      <br />\r\n                      <img\r\n                        src={`/images/${s.image}`} // ðŸ‘ˆ must be in public/images/\r\n                        alt={s.name}\r\n                        style={{ width: \"150px\", borderRadius: \"8px\", marginTop: \"4px\" }}\r\n                      />\r\n                    </>\r\n                  )}\r\n                </Popup>\r\n              </Marker>\r\n            ))}\r\n          </MapContainer>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"card\">\r\n        <h2 style={{ margin: \"0 0 8px\" }}>Most Visited Places</h2>\r\n        <ul style={{ margin: 0, paddingLeft: 18 }}>\r\n          {topSpots.map((s, i) => (\r\n            <li key={i}>\r\n              <strong>{s.name}</strong> â€” {s.visitors} visitors\r\n            </li>\r\n          ))}\r\n          {topSpots.length === 0 && <li>No spots found in spots.csv</li>}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}