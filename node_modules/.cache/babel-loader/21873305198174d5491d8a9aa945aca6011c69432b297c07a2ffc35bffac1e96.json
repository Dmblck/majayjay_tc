{"ast":null,"code":"const ORS_API_KEY = process.env.REACT_APP_ORS_KEY;\nexport async function getRouteInfo(points, mode = \"driving-car\") {\n  if (!points || points.length < 2) {\n    console.error(\"Invalid coordinates passed to getRouteInfo()\");\n    return null;\n  }\n  const coords = points.map(p => [p.lng, p.lat]); // ORS requires [lon, lat]\n\n  const body = {\n    coordinates: coords,\n    format: \"geojson\"\n  };\n  const response = await fetch(`https://api.openrouteservice.org/v2/directions/${mode}/geojson`, {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": ORS_API_KEY,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(body)\n  });\n  if (!response.ok) {\n    const text = await response.text();\n    console.error(\"ORS API error:\", text);\n    throw new Error(\"Routing failed\");\n  }\n  const data = await response.json();\n  const route = data.features[0];\n  if (!route) {\n    console.error(\"No route data found in ORS response\");\n    return null;\n  }\n  const path = route.geometry.coordinates.map(([lon, lat]) => ({\n    lat,\n    lng: lon\n  }));\n  const distance = route.properties.summary.distance;\n  const duration = route.properties.summary.duration;\n  const center = path[Math.floor(path.length / 2)];\n  return {\n    path,\n    distance,\n    duration,\n    center,\n    waypoints: points\n  };\n}","map":{"version":3,"names":["ORS_API_KEY","process","env","REACT_APP_ORS_KEY","getRouteInfo","points","mode","length","console","error","coords","map","p","lng","lat","body","coordinates","format","response","fetch","method","headers","JSON","stringify","ok","text","Error","data","json","route","features","path","geometry","lon","distance","properties","summary","duration","center","Math","floor","waypoints"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/services/orsService.js"],"sourcesContent":["const ORS_API_KEY = process.env.REACT_APP_ORS_KEY;\r\n\r\nexport async function getRouteInfo(points, mode = \"driving-car\") {\r\n  if (!points || points.length < 2) {\r\n    console.error(\"Invalid coordinates passed to getRouteInfo()\");\r\n    return null;\r\n  }\r\n\r\n  const coords = points.map((p) => [p.lng, p.lat]); // ORS requires [lon, lat]\r\n\r\n  const body = {\r\n    coordinates: coords,\r\n    format: \"geojson\",\r\n  };\r\n\r\n  const response = await fetch(`https://api.openrouteservice.org/v2/directions/${mode}/geojson`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Authorization\": ORS_API_KEY,\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const text = await response.text();\r\n    console.error(\"ORS API error:\", text);\r\n    throw new Error(\"Routing failed\");\r\n  }\r\n\r\n  const data = await response.json();\r\n\r\n  const route = data.features[0];\r\n  if (!route) {\r\n    console.error(\"No route data found in ORS response\");\r\n    return null;\r\n  }\r\n\r\n  const path = route.geometry.coordinates.map(([lon, lat]) => ({\r\n    lat,\r\n    lng: lon,\r\n  }));\r\n\r\n  const distance = route.properties.summary.distance;\r\n  const duration = route.properties.summary.duration;\r\n  const center = path[Math.floor(path.length / 2)];\r\n\r\n  return { path, distance, duration, center, waypoints: points };\r\n}\r\n"],"mappings":"AAAA,MAAMA,WAAW,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AAEjD,OAAO,eAAeC,YAAYA,CAACC,MAAM,EAAEC,IAAI,GAAG,aAAa,EAAE;EAC/D,IAAI,CAACD,MAAM,IAAIA,MAAM,CAACE,MAAM,GAAG,CAAC,EAAE;IAChCC,OAAO,CAACC,KAAK,CAAC,8CAA8C,CAAC;IAC7D,OAAO,IAAI;EACb;EAEA,MAAMC,MAAM,GAAGL,MAAM,CAACM,GAAG,CAAEC,CAAC,IAAK,CAACA,CAAC,CAACC,GAAG,EAAED,CAAC,CAACE,GAAG,CAAC,CAAC,CAAC,CAAC;;EAElD,MAAMC,IAAI,GAAG;IACXC,WAAW,EAAEN,MAAM;IACnBO,MAAM,EAAE;EACV,CAAC;EAED,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,kDAAkDb,IAAI,UAAU,EAAE;IAC7Fc,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,eAAe,EAAErB,WAAW;MAC5B,cAAc,EAAE;IAClB,CAAC;IACDe,IAAI,EAAEO,IAAI,CAACC,SAAS,CAACR,IAAI;EAC3B,CAAC,CAAC;EAEF,IAAI,CAACG,QAAQ,CAACM,EAAE,EAAE;IAChB,MAAMC,IAAI,GAAG,MAAMP,QAAQ,CAACO,IAAI,CAAC,CAAC;IAClCjB,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEgB,IAAI,CAAC;IACrC,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;EACnC;EAEA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;EAElC,MAAMC,KAAK,GAAGF,IAAI,CAACG,QAAQ,CAAC,CAAC,CAAC;EAC9B,IAAI,CAACD,KAAK,EAAE;IACVrB,OAAO,CAACC,KAAK,CAAC,qCAAqC,CAAC;IACpD,OAAO,IAAI;EACb;EAEA,MAAMsB,IAAI,GAAGF,KAAK,CAACG,QAAQ,CAAChB,WAAW,CAACL,GAAG,CAAC,CAAC,CAACsB,GAAG,EAAEnB,GAAG,CAAC,MAAM;IAC3DA,GAAG;IACHD,GAAG,EAAEoB;EACP,CAAC,CAAC,CAAC;EAEH,MAAMC,QAAQ,GAAGL,KAAK,CAACM,UAAU,CAACC,OAAO,CAACF,QAAQ;EAClD,MAAMG,QAAQ,GAAGR,KAAK,CAACM,UAAU,CAACC,OAAO,CAACC,QAAQ;EAClD,MAAMC,MAAM,GAAGP,IAAI,CAACQ,IAAI,CAACC,KAAK,CAACT,IAAI,CAACxB,MAAM,GAAG,CAAC,CAAC,CAAC;EAEhD,OAAO;IAAEwB,IAAI;IAAEG,QAAQ;IAAEG,QAAQ;IAAEC,MAAM;IAAEG,SAAS,EAAEpC;EAAO,CAAC;AAChE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}