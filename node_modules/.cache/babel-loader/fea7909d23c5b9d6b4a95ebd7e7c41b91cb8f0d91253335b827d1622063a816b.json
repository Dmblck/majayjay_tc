{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ORS_API_KEY=\"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImJhNWU3NmIxOTRmMzQyYTg4NzY4MDc2MzVmZDY1ZDRhIiwiaCI6Im11cm11cjY0In0=\";export default function RoutePlanner(){const navigate=useNavigate();const[pois,setPois]=useState([]);const[categories,setCategories]=useState([]);const[selectedCategories,setSelectedCategories]=useState([]);const[user,setUser]=useState(null);const[userLocation,setUserLocation]=useState(null);const[showPopup,setShowPopup]=useState(false);const[mode,setMode]=useState(\"car\");const[recommendedPois,setRecommendedPois]=useState([]);// ---------- Load user and POIs ----------\nuseEffect(()=>{const storedUser=JSON.parse(localStorage.getItem(\"user\"));setUser(storedUser);fetch(\"http://localhost:5000/api/pois\").then(res=>res.json()).then(data=>{setPois(data);const cats=[...new Set(data.flatMap(p=>{var _p$tags;return((_p$tags=p.tags)===null||_p$tags===void 0?void 0:_p$tags.split(\",\").map(t=>t.trim()))||[];}))];setCategories(cats);});if(\"geolocation\"in navigator){navigator.geolocation.getCurrentPosition(pos=>setUserLocation({lat:pos.coords.latitude,lng:pos.coords.longitude}),()=>setUserLocation({lat:14.1461,lng:121.5012}));}else setUserLocation({lat:14.1461,lng:121.5012});},[]);// ---------- Fetch ML recommended POIs ----------\nuseEffect(()=>{if(!user)return;fetch(\"http://127.0.0.1:5000/api/recommend\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user_id:user.id})}).then(res=>res.json()).then(data=>setRecommendedPois(data)).catch(err=>console.error(\"Failed to fetch recommendations:\",err));},[user]);// ---------- Toggle category selection ----------\nconst toggleCategory=cat=>{setSelectedCategories(prev=>prev.includes(cat)?prev.filter(c=>c!==cat):[...prev,cat]);};// ---------- Plan Route ----------\nconst planRoute=()=>{if(!userLocation)return alert(\"Waiting for location...\");let filtered=pois;if(selectedCategories.length){filtered=pois.filter(poi=>selectedCategories.some(cat=>{var _poi$tags;return(_poi$tags=poi.tags)===null||_poi$tags===void 0?void 0:_poi$tags.toLowerCase().includes(cat.toLowerCase());}));}if(!filtered.length)filtered=pois;navigate(\"/routedetails\",{state:{startPoint:userLocation,filteredPois:filtered,transportMode:mode===\"foot\"?\"foot-walking\":mode===\"bike\"?\"cycling-regular\":\"driving-car\"}});setShowPopup(false);};// ---------- Filter recommended POIs based on selected categories ----------\nconst filteredRecommended=selectedCategories.length?recommendedPois.filter(poi=>selectedCategories.some(cat=>{var _poi$tags2;return(_poi$tags2=poi.tags)===null||_poi$tags2===void 0?void 0:_poi$tags2.toLowerCase().includes(cat.toLowerCase());})):recommendedPois;return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",marginTop:40},children:[recommendedPois.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:40,padding:\"0 20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#1976d2\",marginBottom:16},children:\"Places You Might Like\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fit, minmax(220px, 1fr))\",gap:16},children:recommendedPois.map(poi=>/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #eee\",borderRadius:10,padding:12,textAlign:\"left\",background:\"#fafafa\",cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:poi.name}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14},children:poi.description})]},poi.id))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPopup(true),style:{padding:\"14px 28px\",background:\"#1976d2\",color:\"#fff\",border:\"none\",borderRadius:10,fontSize:18,cursor:\"pointer\",boxShadow:\"0 4px 12px rgba(0,0,0,0.2)\"},children:\"Plan My Route\"}),showPopup&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",top:0,left:0,width:\"100%\",height:\"100%\",background:\"rgba(0,0,0,0.6)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:9999},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#fff\",padding:30,borderRadius:14,width:450,maxHeight:\"85vh\",overflowY:\"auto\",textAlign:\"center\",boxShadow:\"0 8px 20px rgba(0,0,0,0.3)\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:16,color:\"#1976d2\"},children:\"Select POI Categories\"}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"left\",maxHeight:\"200px\",overflowY:\"auto\",marginBottom:20},children:categories.map(cat=>/*#__PURE__*/_jsxs(\"label\",{style:{display:\"block\",marginBottom:8,fontSize:16},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedCategories.includes(cat),onChange:()=>toggleCategory(cat),style:{marginRight:8}}),cat]},cat))}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:24},children:/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:16},children:[\"Transport Mode:\",\" \",/*#__PURE__*/_jsxs(\"select\",{value:mode,onChange:e=>setMode(e.target.value),style:{padding:6,marginLeft:8},children:[/*#__PURE__*/_jsx(\"option\",{value:\"foot\",children:\"On Foot\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bike\",children:\"Bike\"}),/*#__PURE__*/_jsx(\"option\",{value:\"motor\",children:\"Motor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"car\",children:\"Car\"})]})]})}),filteredRecommended.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20,textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:\"#1976d2\",marginBottom:8},children:\"You Might Also Like\"}),filteredRecommended.map(poi=>/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #eee\",borderRadius:8,padding:8,marginBottom:6,background:\"#f9f9f9\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:poi.name}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:13,margin:0},children:poi.description})]},poi.id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:planRoute,style:{padding:\"10px 24px\",background:\"#4caf50\",color:\"#fff\",border:\"none\",borderRadius:8,cursor:\"pointer\",fontSize:16,flex:1,marginRight:10,boxShadow:\"0 2px 6px rgba(0,0,0,0.2)\"},children:\"Confirm\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPopup(false),style:{padding:\"10px 24px\",background:\"#f44336\",color:\"#fff\",border:\"none\",borderRadius:8,cursor:\"pointer\",fontSize:16,flex:1,boxShadow:\"0 2px 6px rgba(0,0,0,0.2)\"},children:\"Cancel\"})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","ORS_API_KEY","RoutePlanner","navigate","pois","setPois","categories","setCategories","selectedCategories","setSelectedCategories","user","setUser","userLocation","setUserLocation","showPopup","setShowPopup","mode","setMode","recommendedPois","setRecommendedPois","storedUser","JSON","parse","localStorage","getItem","fetch","then","res","json","data","cats","Set","flatMap","p","_p$tags","tags","split","map","t","trim","navigator","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","method","headers","body","stringify","user_id","id","catch","err","console","error","toggleCategory","cat","prev","includes","filter","c","planRoute","alert","filtered","length","poi","some","_poi$tags","toLowerCase","state","startPoint","filteredPois","transportMode","filteredRecommended","_poi$tags2","style","textAlign","marginTop","children","marginBottom","padding","color","display","gridTemplateColumns","gap","border","borderRadius","background","cursor","name","fontSize","description","onClick","boxShadow","position","top","left","width","height","alignItems","justifyContent","zIndex","maxHeight","overflowY","type","checked","onChange","marginRight","value","e","target","marginLeft","margin","flex"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/components/RoutePlanner.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst ORS_API_KEY =\r\n  \"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImJhNWU3NmIxOTRmMzQyYTg4NzY4MDc2MzVmZDY1ZDRhIiwiaCI6Im11cm11cjY0In0=\";\r\n\r\nexport default function RoutePlanner() {\r\n  const navigate = useNavigate();\r\n  const [pois, setPois] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [selectedCategories, setSelectedCategories] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [userLocation, setUserLocation] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [mode, setMode] = useState(\"car\");\r\n  const [recommendedPois, setRecommendedPois] = useState([]);\r\n\r\n  // ---------- Load user and POIs ----------\r\n  useEffect(() => {\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    setUser(storedUser);\r\n\r\n    fetch(\"http://localhost:5000/api/pois\")\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setPois(data);\r\n        const cats = [\r\n          ...new Set(\r\n            data.flatMap((p) =>\r\n              p.tags?.split(\",\").map((t) => t.trim()) || []\r\n            )\r\n          ),\r\n        ];\r\n        setCategories(cats);\r\n      });\r\n\r\n    if (\"geolocation\" in navigator) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (pos) =>\r\n          setUserLocation({\r\n            lat: pos.coords.latitude,\r\n            lng: pos.coords.longitude,\r\n          }),\r\n        () => setUserLocation({ lat: 14.1461, lng: 121.5012 })\r\n      );\r\n    } else setUserLocation({ lat: 14.1461, lng: 121.5012 });\r\n  }, []);\r\n\r\n  // ---------- Fetch ML recommended POIs ----------\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    fetch(\"http://127.0.0.1:5000/api/recommend\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ user_id: user.id }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => setRecommendedPois(data))\r\n      .catch((err) =>\r\n        console.error(\"Failed to fetch recommendations:\", err)\r\n      );\r\n  }, [user]);\r\n\r\n  // ---------- Toggle category selection ----------\r\n  const toggleCategory = (cat) => {\r\n    setSelectedCategories((prev) =>\r\n      prev.includes(cat) ? prev.filter((c) => c !== cat) : [...prev, cat]\r\n    );\r\n  };\r\n\r\n  // ---------- Plan Route ----------\r\n  const planRoute = () => {\r\n    if (!userLocation) return alert(\"Waiting for location...\");\r\n\r\n    let filtered = pois;\r\n    if (selectedCategories.length) {\r\n      filtered = pois.filter((poi) =>\r\n        selectedCategories.some((cat) =>\r\n          poi.tags?.toLowerCase().includes(cat.toLowerCase())\r\n        )\r\n      );\r\n    }\r\n    if (!filtered.length) filtered = pois;\r\n\r\n    navigate(\"/routedetails\", {\r\n      state: {\r\n        startPoint: userLocation,\r\n        filteredPois: filtered,\r\n        transportMode:\r\n          mode === \"foot\"\r\n            ? \"foot-walking\"\r\n            : mode === \"bike\"\r\n            ? \"cycling-regular\"\r\n            : \"driving-car\",\r\n      },\r\n    });\r\n\r\n    setShowPopup(false);\r\n  };\r\n\r\n  // ---------- Filter recommended POIs based on selected categories ----------\r\n  const filteredRecommended = selectedCategories.length\r\n    ? recommendedPois.filter((poi) =>\r\n        selectedCategories.some((cat) =>\r\n          poi.tags?.toLowerCase().includes(cat.toLowerCase())\r\n        )\r\n      )\r\n    : recommendedPois;\r\n\r\n  return (\r\n    <div style={{ textAlign: \"center\", marginTop: 40 }}>\r\n      {/* ---------- Homepage \"Places You Might Like\" Grid ---------- */}\r\n      {recommendedPois.length > 0 && (\r\n        <div style={{ marginBottom: 40, padding: \"0 20px\" }}>\r\n          <h2 style={{ color: \"#1976d2\", marginBottom: 16 }}>\r\n            Places You Might Like\r\n          </h2>\r\n          <div\r\n            style={{\r\n              display: \"grid\",\r\n              gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\r\n              gap: 16,\r\n            }}\r\n          >\r\n            {recommendedPois.map((poi) => (\r\n              <div\r\n                key={poi.id}\r\n                style={{\r\n                  border: \"1px solid #eee\",\r\n                  borderRadius: 10,\r\n                  padding: 12,\r\n                  textAlign: \"left\",\r\n                  background: \"#fafafa\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                <strong>{poi.name}</strong>\r\n                <p style={{ fontSize: 14 }}>{poi.description}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ---------- Plan My Route Button ---------- */}\r\n      <button\r\n        onClick={() => setShowPopup(true)}\r\n        style={{\r\n          padding: \"14px 28px\",\r\n          background: \"#1976d2\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: 10,\r\n          fontSize: 18,\r\n          cursor: \"pointer\",\r\n          boxShadow: \"0 4px 12px rgba(0,0,0,0.2)\",\r\n        }}\r\n      >\r\n        Plan My Route\r\n      </button>\r\n\r\n      {/* ---------- Category & Transport Mode Popup ---------- */}\r\n      {showPopup && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            background: \"rgba(0,0,0,0.6)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            zIndex: 9999,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              background: \"#fff\",\r\n              padding: 30,\r\n              borderRadius: 14,\r\n              width: 450,\r\n              maxHeight: \"85vh\",\r\n              overflowY: \"auto\",\r\n              textAlign: \"center\",\r\n              boxShadow: \"0 8px 20px rgba(0,0,0,0.3)\",\r\n            }}\r\n          >\r\n            <h2 style={{ marginBottom: 16, color: \"#1976d2\" }}>\r\n              Select POI Categories\r\n            </h2>\r\n\r\n            <div\r\n              style={{\r\n                textAlign: \"left\",\r\n                maxHeight: \"200px\",\r\n                overflowY: \"auto\",\r\n                marginBottom: 20,\r\n              }}\r\n            >\r\n              {categories.map((cat) => (\r\n                <label\r\n                  key={cat}\r\n                  style={{ display: \"block\", marginBottom: 8, fontSize: 16 }}\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedCategories.includes(cat)}\r\n                    onChange={() => toggleCategory(cat)}\r\n                    style={{ marginRight: 8 }}\r\n                  />\r\n                  {cat}\r\n                </label>\r\n              ))}\r\n            </div>\r\n\r\n            <div style={{ marginBottom: 24 }}>\r\n              <label style={{ fontSize: 16 }}>\r\n                Transport Mode:{\" \"}\r\n                <select\r\n                  value={mode}\r\n                  onChange={(e) => setMode(e.target.value)}\r\n                  style={{ padding: 6, marginLeft: 8 }}\r\n                >\r\n                  <option value=\"foot\">On Foot</option>\r\n                  <option value=\"bike\">Bike</option>\r\n                  <option value=\"motor\">Motor</option>\r\n                  <option value=\"car\">Car</option>\r\n                </select>\r\n              </label>\r\n            </div>\r\n\r\n            {/* ---------- ML Recommended POIs in Popup (dynamic) ---------- */}\r\n            {filteredRecommended.length > 0 && (\r\n              <div style={{ marginBottom: 20, textAlign: \"left\" }}>\r\n                <h3 style={{ color: \"#1976d2\", marginBottom: 8 }}>\r\n                  You Might Also Like\r\n                </h3>\r\n                {filteredRecommended.map((poi) => (\r\n                  <div\r\n                    key={poi.id}\r\n                    style={{\r\n                      border: \"1px solid #eee\",\r\n                      borderRadius: 8,\r\n                      padding: 8,\r\n                      marginBottom: 6,\r\n                      background: \"#f9f9f9\",\r\n                    }}\r\n                  >\r\n                    <strong>{poi.name}</strong>\r\n                    <p style={{ fontSize: 13, margin: 0 }}>\r\n                      {poi.description}\r\n                    </p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n              <button\r\n                onClick={planRoute}\r\n                style={{\r\n                  padding: \"10px 24px\",\r\n                  background: \"#4caf50\",\r\n                  color: \"#fff\",\r\n                  border: \"none\",\r\n                  borderRadius: 8,\r\n                  cursor: \"pointer\",\r\n                  fontSize: 16,\r\n                  flex: 1,\r\n                  marginRight: 10,\r\n                  boxShadow: \"0 2px 6px rgba(0,0,0,0.2)\",\r\n                }}\r\n              >\r\n                Confirm\r\n              </button>\r\n              <button\r\n                onClick={() => setShowPopup(false)}\r\n                style={{\r\n                  padding: \"10px 24px\",\r\n                  background: \"#f44336\",\r\n                  color: \"#fff\",\r\n                  border: \"none\",\r\n                  borderRadius: 8,\r\n                  cursor: \"pointer\",\r\n                  fontSize: 16,\r\n                  flex: 1,\r\n                  boxShadow: \"0 2px 6px rgba(0,0,0,0.2)\",\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}