{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Navbar(_ref){let{user,setUser}=_ref;const navigate=useNavigate();const[menuOpen,setMenuOpen]=useState(false);const menuRef=useRef(null);useEffect(()=>{function handleClickOutside(e){if(menuRef.current&&!menuRef.current.contains(e.target)){setMenuOpen(false);}}document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[]);const handleLogout=()=>{localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");setUser(null);// âœ… important: reset state\nnavigate(\"/login\");};if(!user)return null;const isAdmin=user.role===\"admin\";// --- Admin Sidebar ---\nif(isAdmin){return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"220px\",height:\"100vh\",background:\"#2563eb\",color:\"#fff\",display:\"flex\",flexDirection:\"column\",padding:\"20px\",position:\"fixed\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:\"24px\"},children:\"Admin Panel\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/dashboard\",style:{color:\"#fff\",textDecoration:\"none\",marginBottom:\"16px\"},children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/pois\",style:{color:\"#fff\",textDecoration:\"none\",marginBottom:\"16px\"},children:\"Manage POIs\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/users\",style:{color:\"#fff\",textDecoration:\"none\",marginBottom:\"16px\"},children:\"Manage Users\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/preferences\",style:{color:\"#fff\",textDecoration:\"none\",marginBottom:\"16px\"},children:\"Preferences\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/ml\",style:{color:\"#fff\",textDecoration:\"none\",marginBottom:\"16px\"},children:\"ML Module\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/reports\",style:{color:\"#fff\",textDecoration:\"none\",marginBottom:\"16px\"},children:\"Reports\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{marginTop:\"auto\",background:\"red\",border:\"none\",color:\"#fff\",padding:\"10px\",borderRadius:\"6px\",cursor:\"pointer\"},children:\"Logout\"})]});}// --- Regular User Topbar ---\nreturn/*#__PURE__*/_jsxs(\"nav\",{style:{padding:\"12px 20px\",background:\"#2563eb\",color:\"#fff\",display:\"flex\",gap:\"20px\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",style:{color:\"#fff\",textDecoration:\"none\"},children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/mappage\",style:{color:\"#fff\",textDecoration:\"none\"},children:\"Map\"}),/*#__PURE__*/_jsx(Link,{to:\"/establishments\",style:{color:\"#fff\",textDecoration:\"none\"},children:\"Establishments\"}),/*#__PURE__*/_jsx(Link,{to:\"/natureculture\",style:{color:\"#fff\",textDecoration:\"none\"},children:\"Nature & Culture\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"auto\",position:\"relative\"},ref:menuRef,children:[/*#__PURE__*/_jsx(\"div\",{onClick:()=>setMenuOpen(prev=>!prev),style:{width:\"36px\",height:\"36px\",borderRadius:\"50%\",background:\"#fff\",color:\"#2563eb\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontWeight:\"bold\",cursor:\"pointer\",userSelect:\"none\"},children:\"\\uD83D\\uDC64\"}),menuOpen&&/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",right:0,top:\"48px\",background:\"#fff\",color:\"#333\",borderRadius:\"8px\",boxShadow:\"0 2px 8px rgba(0,0,0,0.15)\",overflow:\"hidden\",zIndex:100},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigate(\"/profile\");setMenuOpen(false);},style:{display:\"block\",width:\"100%\",padding:\"10px 16px\",textAlign:\"left\",background:\"none\",border:\"none\",cursor:\"pointer\"},children:\"Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{display:\"block\",width:\"100%\",padding:\"10px 16px\",textAlign:\"left\",background:\"none\",border:\"none\",color:\"red\",cursor:\"pointer\"},children:\"Logout\"})]})]})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Navbar","_ref","user","setUser","navigate","menuOpen","setMenuOpen","menuRef","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","handleLogout","localStorage","removeItem","isAdmin","role","style","width","height","background","color","display","flexDirection","padding","position","children","marginBottom","to","textDecoration","onClick","marginTop","border","borderRadius","cursor","gap","alignItems","marginLeft","ref","prev","justifyContent","fontWeight","userSelect","right","top","boxShadow","overflow","zIndex","textAlign"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/components/NavBar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Navbar({ user, setUser }) {\r\n  const navigate = useNavigate();\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const menuRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(e) {\r\n      if (menuRef.current && !menuRef.current.contains(e.target)) {\r\n        setMenuOpen(false);\r\n      }\r\n    }\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"user\");\r\n    setUser(null); // âœ… important: reset state\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  const isAdmin = user.role === \"admin\";\r\n\r\n  // --- Admin Sidebar ---\r\n  if (isAdmin) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"220px\",\r\n          height: \"100vh\",\r\n          background: \"#2563eb\",\r\n          color: \"#fff\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          padding: \"20px\",\r\n          position: \"fixed\",\r\n        }}\r\n      >\r\n        <h2 style={{ marginBottom: \"24px\" }}>Admin Panel</h2>\r\n        <Link to=\"/admin/dashboard\" style={{ color: \"#fff\", textDecoration: \"none\", marginBottom: \"16px\" }}>Dashboard</Link>\r\n        <Link to=\"/admin/pois\" style={{ color: \"#fff\", textDecoration: \"none\", marginBottom: \"16px\" }}>Manage POIs</Link>\r\n        <Link to=\"/admin/users\" style={{ color: \"#fff\", textDecoration: \"none\", marginBottom: \"16px\" }}>Manage Users</Link>\r\n        <Link to=\"/admin/preferences\" style={{ color: \"#fff\", textDecoration: \"none\", marginBottom: \"16px\" }}>Preferences</Link>\r\n        <Link to=\"/admin/ml\" style={{ color: \"#fff\", textDecoration: \"none\", marginBottom: \"16px\" }}>ML Module</Link>\r\n        <Link to=\"/admin/reports\" style={{ color: \"#fff\", textDecoration: \"none\", marginBottom: \"16px\" }}>Reports</Link>\r\n        <button\r\n          onClick={handleLogout}\r\n          style={{\r\n            marginTop: \"auto\",\r\n            background: \"red\",\r\n            border: \"none\",\r\n            color: \"#fff\",\r\n            padding: \"10px\",\r\n            borderRadius: \"6px\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          Logout\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Regular User Topbar ---\r\n  return (\r\n    <nav\r\n      style={{\r\n        padding: \"12px 20px\",\r\n        background: \"#2563eb\",\r\n        color: \"#fff\",\r\n        display: \"flex\",\r\n        gap: \"20px\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <Link to=\"/home\" style={{ color: \"#fff\", textDecoration: \"none\" }}>Home</Link>\r\n      <Link to=\"/mappage\" style={{ color: \"#fff\", textDecoration: \"none\" }}>Map</Link>\r\n      <Link to=\"/establishments\" style={{ color: \"#fff\", textDecoration: \"none\" }}>Establishments</Link>\r\n      <Link to=\"/natureculture\" style={{ color: \"#fff\", textDecoration: \"none\" }}>Nature & Culture</Link>\r\n      <div style={{ marginLeft: \"auto\", position: \"relative\" }} ref={menuRef}>\r\n        <div\r\n          onClick={() => setMenuOpen(prev => !prev)}\r\n          style={{\r\n            width: \"36px\",\r\n            height: \"36px\",\r\n            borderRadius: \"50%\",\r\n            background: \"#fff\",\r\n            color: \"#2563eb\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            fontWeight: \"bold\",\r\n            cursor: \"pointer\",\r\n            userSelect: \"none\",\r\n          }}\r\n        >\r\n          ðŸ‘¤\r\n        </div>\r\n        {menuOpen && (\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              right: 0,\r\n              top: \"48px\",\r\n              background: \"#fff\",\r\n              color: \"#333\",\r\n              borderRadius: \"8px\",\r\n              boxShadow: \"0 2px 8px rgba(0,0,0,0.15)\",\r\n              overflow: \"hidden\",\r\n              zIndex: 100,\r\n            }}\r\n          >\r\n            <button\r\n              onClick={() => { navigate(\"/profile\"); setMenuOpen(false); }}\r\n              style={{ display: \"block\", width: \"100%\", padding: \"10px 16px\", textAlign: \"left\", background: \"none\", border: \"none\", cursor: \"pointer\" }}\r\n            >\r\n              Profile\r\n            </button>\r\n            <button\r\n              onClick={handleLogout}\r\n              style={{ display: \"block\", width: \"100%\", padding: \"10px 16px\", textAlign: \"left\", background: \"none\", border: \"none\", color: \"red\", cursor: \"pointer\" }}\r\n            >\r\n              Logout\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}