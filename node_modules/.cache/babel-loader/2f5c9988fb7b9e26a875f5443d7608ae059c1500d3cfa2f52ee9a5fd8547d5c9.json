{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{MapContainer,TileLayer,Marker,Popup}from\"react-leaflet\";import\"leaflet/dist/leaflet.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CENTER={lat:14.1467,lng:121.4708};export default function Home(){const[spots,setSpots]=useState([]);const[selectedSpot,setSelectedSpot]=useState(null);const mapRef=useRef(null);const markerRefs=useRef({});useEffect(()=>{fetch(\"http://localhost:5000/api/spots\").then(res=>res.json()).then(data=>{const rows=data.map(r=>({name:r.name,lat:parseFloat(r.lat),lng:parseFloat(r.lng),description:r.description||\"No description available\",visitors:r.visitors||\"Moderate\",tags:r.tags?r.tags.split(\",\").map(t=>t.trim()):[],image:r.image?\"/images/\".concat(r.image.replace(/^\\/+/,\"\").split(\"/\").pop()):null}));setSpots(rows);}).catch(err=>console.error(\"Error fetching spots:\",err));},[]);const focusOnSpot=spot=>{if(mapRef.current){mapRef.current.flyTo([spot.lat,spot.lng],15,{duration:1.5});}if(markerRefs.current[spot.name]){markerRefs.current[spot.name].openPopup();}};return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:\"20px\",padding:\"16px\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#fff\",borderRadius:\"12px\",padding:\"16px\",boxShadow:\"0 4px 10px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"20px\",fontWeight:\"bold\",marginBottom:\"12px\"},children:\"Majayjay Map\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"500px\",borderRadius:\"10px\",overflow:\"hidden\"},children:spots.length>0?/*#__PURE__*/_jsxs(MapContainer,{center:CENTER,zoom:13,style:{height:\"100%\",width:\"100%\"},whenCreated:mapInstance=>mapRef.current=mapInstance,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/\\\">OSM contributors</a>\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),spots.map((spot,i)=>/*#__PURE__*/_jsx(Marker,{position:[spot.lat,spot.lng],ref:ref=>{if(ref)markerRefs.current[spot.name]=ref;},eventHandlers:{click:()=>setSelectedSpot(spot)},children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"strong\",{children:spot.name}),/*#__PURE__*/_jsx(\"br\",{}),\"Visitors: \",spot.visitors,spot.image&&/*#__PURE__*/_jsx(\"br\",{}),spot.image&&/*#__PURE__*/_jsx(\"img\",{src:spot.image,alt:spot.name,style:{width:\"150px\",borderRadius:\"8px\",marginTop:\"6px\"}}),/*#__PURE__*/_jsx(\"p\",{children:spot.description})]})},i))]}):/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",color:\"#888\",padding:\"20px\"},children:\"No spots available\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#fff\",borderRadius:\"12px\",padding:\"16px\",boxShadow:\"0 4px 10px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"20px\",fontWeight:\"bold\",marginBottom:\"12px\"},children:\"Top Places\"}),/*#__PURE__*/_jsx(\"ul\",{style:{paddingLeft:\"20px\",color:\"#444\"},children:spots.map((spot,i)=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:\"8px\",cursor:\"pointer\"},onClick:()=>focusOnSpot(spot),children:[/*#__PURE__*/_jsx(\"strong\",{children:spot.name}),\" \\u2014 \",spot.visitors,\" visitors\"]},i))})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","MapContainer","TileLayer","Marker","Popup","jsx","_jsx","jsxs","_jsxs","CENTER","lat","lng","Home","spots","setSpots","selectedSpot","setSelectedSpot","mapRef","markerRefs","fetch","then","res","json","data","rows","map","r","name","parseFloat","description","visitors","tags","split","t","trim","image","concat","replace","pop","catch","err","console","error","focusOnSpot","spot","current","flyTo","duration","openPopup","style","display","gridTemplateColumns","gap","padding","children","background","borderRadius","boxShadow","fontSize","fontWeight","marginBottom","height","overflow","length","center","zoom","width","whenCreated","mapInstance","attribution","url","i","position","ref","eventHandlers","click","src","alt","marginTop","textAlign","color","paddingLeft","cursor","onClick"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\nconst CENTER = { lat: 14.1467, lng: 121.4708 };\r\n\r\nexport default function Home() {\r\n  const [spots, setSpots] = useState([]);\r\n  const [selectedSpot, setSelectedSpot] = useState(null);\r\n  const mapRef = useRef(null);\r\n  const markerRefs = useRef({});\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/spots\")\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        const rows = data.map((r) => ({\r\n          name: r.name,\r\n          lat: parseFloat(r.lat),\r\n          lng: parseFloat(r.lng),\r\n          description: r.description || \"No description available\",\r\n          visitors: r.visitors || \"Moderate\",\r\n          tags: r.tags ? r.tags.split(\",\").map((t) => t.trim()) : [],\r\n          image: r.image\r\n            ? `/images/${r.image.replace(/^\\/+/, \"\").split(\"/\").pop()}`\r\n            : null,\r\n        }));\r\n        setSpots(rows);\r\n      })\r\n      .catch((err) => console.error(\"Error fetching spots:\", err));\r\n  }, []);\r\n\r\n  const focusOnSpot = (spot) => {\r\n    if (mapRef.current) {\r\n      mapRef.current.flyTo([spot.lat, spot.lng], 15, { duration: 1.5 });\r\n    }\r\n    if (markerRefs.current[spot.name]) {\r\n      markerRefs.current[spot.name].openPopup();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"grid\",\r\n        gridTemplateColumns: \"1fr 1fr\",\r\n        gap: \"20px\",\r\n        padding: \"16px\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          background: \"#fff\",\r\n          borderRadius: \"12px\",\r\n          padding: \"16px\",\r\n          boxShadow: \"0 4px 10px rgba(0,0,0,0.1)\",\r\n        }}\r\n      >\r\n        <h2 style={{ fontSize: \"20px\", fontWeight: \"bold\", marginBottom: \"12px\" }}>\r\n          Majayjay Map\r\n        </h2>\r\n        <div style={{ height: \"500px\", borderRadius: \"10px\", overflow: \"hidden\" }}>\r\n          {spots.length > 0 ? (\r\n            <MapContainer\r\n              center={CENTER}\r\n              zoom={13}\r\n              style={{ height: \"100%\", width: \"100%\" }}\r\n              whenCreated={(mapInstance) => (mapRef.current = mapInstance)}\r\n            >\r\n              <TileLayer\r\n                attribution='&copy; <a href=\"https://www.openstreetmap.org/\">OSM contributors</a>'\r\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n              />\r\n              {spots.map((spot, i) => (\r\n                <Marker\r\n                  key={i}\r\n                  position={[spot.lat, spot.lng]}\r\n                  ref={(ref) => {\r\n                    if (ref) markerRefs.current[spot.name] = ref;\r\n                  }}\r\n                  eventHandlers={{ click: () => setSelectedSpot(spot) }}\r\n                >\r\n                  <Popup>\r\n                    <strong>{spot.name}</strong>\r\n                    <br />\r\n                    Visitors: {spot.visitors}\r\n                    {spot.image && <br />}\r\n                    {spot.image && (\r\n                      <img\r\n                        src={spot.image}\r\n                        alt={spot.name}\r\n                        style={{\r\n                          width: \"150px\",\r\n                          borderRadius: \"8px\",\r\n                          marginTop: \"6px\",\r\n                        }}\r\n                      />\r\n                    )}\r\n                    <p>{spot.description}</p>\r\n                  </Popup>\r\n                </Marker>\r\n              ))}\r\n            </MapContainer>\r\n          ) : (\r\n            <div\r\n              style={{\r\n                textAlign: \"center\",\r\n                color: \"#888\",\r\n                padding: \"20px\",\r\n              }}\r\n            >\r\n              No spots available\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          background: \"#fff\",\r\n          borderRadius: \"12px\",\r\n          padding: \"16px\",\r\n          boxShadow: \"0 4px 10px rgba(0,0,0,0.1)\",\r\n        }}\r\n      >\r\n        <h2 style={{ fontSize: \"20px\", fontWeight: \"bold\", marginBottom: \"12px\" }}>\r\n          Top Places\r\n        </h2>\r\n        <ul style={{ paddingLeft: \"20px\", color: \"#444\" }}>\r\n          {spots.map((spot, i) => (\r\n            <li\r\n              key={i}\r\n              style={{ marginBottom: \"8px\", cursor: \"pointer\" }}\r\n              onClick={() => focusOnSpot(spot)}\r\n            >\r\n              <strong>{spot.name}</strong> â€” {spot.visitors} visitors\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,YAAY,CAAEC,SAAS,CAAEC,MAAM,CAAEC,KAAK,KAAQ,eAAe,CACtE,MAAO,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElC,KAAM,CAAAC,MAAM,CAAG,CAAEC,GAAG,CAAE,OAAO,CAAEC,GAAG,CAAE,QAAS,CAAC,CAE9C,cAAe,SAAS,CAAAC,IAAIA,CAAA,CAAG,CAC7B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,YAAY,CAAEC,eAAe,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAAAkB,MAAM,CAAGjB,MAAM,CAAC,IAAI,CAAC,CAC3B,KAAM,CAAAkB,UAAU,CAAGlB,MAAM,CAAC,CAAC,CAAC,CAAC,CAE7BF,SAAS,CAAC,IAAM,CACdqB,KAAK,CAAC,iCAAiC,CAAC,CACrCC,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,EAAK,CACd,KAAM,CAAAC,IAAI,CAAGD,IAAI,CAACE,GAAG,CAAEC,CAAC,GAAM,CAC5BC,IAAI,CAAED,CAAC,CAACC,IAAI,CACZjB,GAAG,CAAEkB,UAAU,CAACF,CAAC,CAAChB,GAAG,CAAC,CACtBC,GAAG,CAAEiB,UAAU,CAACF,CAAC,CAACf,GAAG,CAAC,CACtBkB,WAAW,CAAEH,CAAC,CAACG,WAAW,EAAI,0BAA0B,CACxDC,QAAQ,CAAEJ,CAAC,CAACI,QAAQ,EAAI,UAAU,CAClCC,IAAI,CAAEL,CAAC,CAACK,IAAI,CAAGL,CAAC,CAACK,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACP,GAAG,CAAEQ,CAAC,EAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAAG,EAAE,CAC1DC,KAAK,CAAET,CAAC,CAACS,KAAK,YAAAC,MAAA,CACCV,CAAC,CAACS,KAAK,CAACE,OAAO,CAAC,MAAM,CAAE,EAAE,CAAC,CAACL,KAAK,CAAC,GAAG,CAAC,CAACM,GAAG,CAAC,CAAC,EACvD,IACN,CAAC,CAAC,CAAC,CACHxB,QAAQ,CAACU,IAAI,CAAC,CAChB,CAAC,CAAC,CACDe,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAAC,CAChE,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,WAAW,CAAIC,IAAI,EAAK,CAC5B,GAAI3B,MAAM,CAAC4B,OAAO,CAAE,CAClB5B,MAAM,CAAC4B,OAAO,CAACC,KAAK,CAAC,CAACF,IAAI,CAAClC,GAAG,CAAEkC,IAAI,CAACjC,GAAG,CAAC,CAAE,EAAE,CAAE,CAAEoC,QAAQ,CAAE,GAAI,CAAC,CAAC,CACnE,CACA,GAAI7B,UAAU,CAAC2B,OAAO,CAACD,IAAI,CAACjB,IAAI,CAAC,CAAE,CACjCT,UAAU,CAAC2B,OAAO,CAACD,IAAI,CAACjB,IAAI,CAAC,CAACqB,SAAS,CAAC,CAAC,CAC3C,CACF,CAAC,CAED,mBACExC,KAAA,QACEyC,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfC,mBAAmB,CAAE,SAAS,CAC9BC,GAAG,CAAE,MAAM,CACXC,OAAO,CAAE,MACX,CAAE,CAAAC,QAAA,eAEF9C,KAAA,QACEyC,KAAK,CAAE,CACLM,UAAU,CAAE,MAAM,CAClBC,YAAY,CAAE,MAAM,CACpBH,OAAO,CAAE,MAAM,CACfI,SAAS,CAAE,4BACb,CAAE,CAAAH,QAAA,eAEFhD,IAAA,OAAI2C,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAEC,UAAU,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAN,QAAA,CAAC,cAE3E,CAAI,CAAC,cACLhD,IAAA,QAAK2C,KAAK,CAAE,CAAEY,MAAM,CAAE,OAAO,CAAEL,YAAY,CAAE,MAAM,CAAEM,QAAQ,CAAE,QAAS,CAAE,CAAAR,QAAA,CACvEzC,KAAK,CAACkD,MAAM,CAAG,CAAC,cACfvD,KAAA,CAACP,YAAY,EACX+D,MAAM,CAAEvD,MAAO,CACfwD,IAAI,CAAE,EAAG,CACThB,KAAK,CAAE,CAAEY,MAAM,CAAE,MAAM,CAAEK,KAAK,CAAE,MAAO,CAAE,CACzCC,WAAW,CAAGC,WAAW,EAAMnD,MAAM,CAAC4B,OAAO,CAAGuB,WAAa,CAAAd,QAAA,eAE7DhD,IAAA,CAACJ,SAAS,EACRmE,WAAW,CAAC,sEAAsE,CAClFC,GAAG,CAAC,oDAAoD,CACzD,CAAC,CACDzD,KAAK,CAACY,GAAG,CAAC,CAACmB,IAAI,CAAE2B,CAAC,gBACjBjE,IAAA,CAACH,MAAM,EAELqE,QAAQ,CAAE,CAAC5B,IAAI,CAAClC,GAAG,CAAEkC,IAAI,CAACjC,GAAG,CAAE,CAC/B8D,GAAG,CAAGA,GAAG,EAAK,CACZ,GAAIA,GAAG,CAAEvD,UAAU,CAAC2B,OAAO,CAACD,IAAI,CAACjB,IAAI,CAAC,CAAG8C,GAAG,CAC9C,CAAE,CACFC,aAAa,CAAE,CAAEC,KAAK,CAAEA,CAAA,GAAM3D,eAAe,CAAC4B,IAAI,CAAE,CAAE,CAAAU,QAAA,cAEtD9C,KAAA,CAACJ,KAAK,EAAAkD,QAAA,eACJhD,IAAA,WAAAgD,QAAA,CAASV,IAAI,CAACjB,IAAI,CAAS,CAAC,cAC5BrB,IAAA,QAAK,CAAC,aACI,CAACsC,IAAI,CAACd,QAAQ,CACvBc,IAAI,CAACT,KAAK,eAAI7B,IAAA,QAAK,CAAC,CACpBsC,IAAI,CAACT,KAAK,eACT7B,IAAA,QACEsE,GAAG,CAAEhC,IAAI,CAACT,KAAM,CAChB0C,GAAG,CAAEjC,IAAI,CAACjB,IAAK,CACfsB,KAAK,CAAE,CACLiB,KAAK,CAAE,OAAO,CACdV,YAAY,CAAE,KAAK,CACnBsB,SAAS,CAAE,KACb,CAAE,CACH,CACF,cACDxE,IAAA,MAAAgD,QAAA,CAAIV,IAAI,CAACf,WAAW,CAAI,CAAC,EACpB,CAAC,EAxBH0C,CAyBC,CACT,CAAC,EACU,CAAC,cAEfjE,IAAA,QACE2C,KAAK,CAAE,CACL8B,SAAS,CAAE,QAAQ,CACnBC,KAAK,CAAE,MAAM,CACb3B,OAAO,CAAE,MACX,CAAE,CAAAC,QAAA,CACH,oBAED,CAAK,CACN,CACE,CAAC,EACH,CAAC,cAEN9C,KAAA,QACEyC,KAAK,CAAE,CACLM,UAAU,CAAE,MAAM,CAClBC,YAAY,CAAE,MAAM,CACpBH,OAAO,CAAE,MAAM,CACfI,SAAS,CAAE,4BACb,CAAE,CAAAH,QAAA,eAEFhD,IAAA,OAAI2C,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAEC,UAAU,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAN,QAAA,CAAC,YAE3E,CAAI,CAAC,cACLhD,IAAA,OAAI2C,KAAK,CAAE,CAAEgC,WAAW,CAAE,MAAM,CAAED,KAAK,CAAE,MAAO,CAAE,CAAA1B,QAAA,CAC/CzC,KAAK,CAACY,GAAG,CAAC,CAACmB,IAAI,CAAE2B,CAAC,gBACjB/D,KAAA,OAEEyC,KAAK,CAAE,CAAEW,YAAY,CAAE,KAAK,CAAEsB,MAAM,CAAE,SAAU,CAAE,CAClDC,OAAO,CAAEA,CAAA,GAAMxC,WAAW,CAACC,IAAI,CAAE,CAAAU,QAAA,eAEjChD,IAAA,WAAAgD,QAAA,CAASV,IAAI,CAACjB,IAAI,CAAS,CAAC,WAAG,CAACiB,IAAI,CAACd,QAAQ,CAAC,WAChD,GALOyC,CAKH,CACL,CAAC,CACA,CAAC,EACF,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}