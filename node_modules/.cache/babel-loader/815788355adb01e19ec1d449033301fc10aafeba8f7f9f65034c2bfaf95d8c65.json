{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Majayjay Tourism Circuit\\\\src\\\\components\\\\RoutePlanner.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RoutePlanner() {\n  _s();\n  const [pois, setPois] = useState([]);\n  const [user, setUser] = useState(null);\n  const [startTime, setStartTime] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [customDate, setCustomDate] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Load user from localStorage\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n    setUser(storedUser);\n\n    // Fetch POIs from backend\n    fetch(\"http://localhost:5000/api/pois\").then(res => res.json()).then(data => setPois(data)).catch(err => {\n      console.error(\"Error fetching POIs:\", err);\n      setPois([]);\n    });\n  }, []);\n  const handleStartNow = () => {\n    const now = new Date();\n    setStartTime(now.toISOString());\n    setShowPopup(false);\n    recommendRoute(now.toISOString());\n  };\n  const handleStartLater = () => {\n    if (!customDate) {\n      alert(\"Please select a date & time.\");\n      return;\n    }\n    setStartTime(customDate);\n    setShowPopup(false);\n    recommendRoute(customDate);\n  };\n  const openPopup = () => {\n    setShowPopup(true);\n  };\n  const recommendRoute = start => {\n    if (!user || !user.preferences || user.preferences.length === 0) {\n      alert(\"Set your preferences first in profile.\");\n      return;\n    }\n\n    // Convert preferences to lowercase\n    const prefs = user.preferences.map(p => p.toLowerCase());\n\n    // Filter POIs based on tags (comma separated)\n    const filtered = pois.filter(poi => {\n      const poiTags = poi.tags ? poi.tags.toLowerCase().split(\",\").map(t => t.trim()) : [];\n      return prefs.some(pref => poiTags.includes(pref));\n    });\n\n    // Take the first 4 matched POIs\n    const selected = filtered.slice(0, 4);\n    if (selected.length === 0) {\n      alert(\"No POIs match your preferences.\");\n      return;\n    }\n\n    // Navigate to route details with selected POIs & start time\n    navigate(\"/routedetails\", {\n      state: {\n        itinerary: selected,\n        startTime: start\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\",\n      marginTop: 40\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: openPopup,\n      style: {\n        padding: \"12px 24px\",\n        background: \"#2196f3\",\n        color: \"#fff\",\n        border: \"none\",\n        borderRadius: 8,\n        fontSize: 16,\n        cursor: \"pointer\"\n      },\n      children: \"Plan My Route\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), showPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.6)\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        zIndex: 9999\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"#fff\",\n          padding: 20,\n          borderRadius: 10,\n          width: 300,\n          textAlign: \"center\",\n          zIndex: 10000\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"When do you want to start?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleStartNow,\n          style: {\n            margin: \"10px\",\n            padding: \"10px 20px\",\n            background: \"#4caf50\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: 5,\n            cursor: \"pointer\"\n          },\n          children: \"Start Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"10px 0\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            value: customDate,\n            onChange: e => setCustomDate(e.target.value),\n            style: {\n              width: \"100%\",\n              padding: \"5px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleStartLater,\n          style: {\n            margin: \"10px\",\n            padding: \"10px 20px\",\n            background: \"#2196f3\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: 5,\n            cursor: \"pointer\"\n          },\n          children: \"Start Later\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(RoutePlanner, \"Fmq9EOCDpHzEhthev+LwAvQhjHM=\", false, function () {\n  return [useNavigate];\n});\n_c = RoutePlanner;\nvar _c;\n$RefreshReg$(_c, \"RoutePlanner\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsxDEV","_jsxDEV","RoutePlanner","_s","pois","setPois","user","setUser","startTime","setStartTime","showPopup","setShowPopup","customDate","setCustomDate","navigate","storedUser","JSON","parse","localStorage","getItem","fetch","then","res","json","data","catch","err","console","error","handleStartNow","now","Date","toISOString","recommendRoute","handleStartLater","alert","openPopup","start","preferences","length","prefs","map","p","toLowerCase","filtered","filter","poi","poiTags","tags","split","t","trim","some","pref","includes","selected","slice","state","itinerary","style","textAlign","marginTop","children","onClick","padding","background","color","border","borderRadius","fontSize","cursor","fileName","_jsxFileName","lineNumber","columnNumber","position","top","left","width","height","display","alignItems","justifyContent","zIndex","margin","type","value","onChange","e","target","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/Majayjay Tourism Circuit/src/components/RoutePlanner.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function RoutePlanner() {\r\n  const [pois, setPois] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [startTime, setStartTime] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [customDate, setCustomDate] = useState(\"\");\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Load user from localStorage\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    setUser(storedUser);\r\n\r\n    // Fetch POIs from backend\r\n    fetch(\"http://localhost:5000/api/pois\")\r\n      .then((res) => res.json())\r\n      .then((data) => setPois(data))\r\n      .catch((err) => {\r\n        console.error(\"Error fetching POIs:\", err);\r\n        setPois([]);\r\n      });\r\n  }, []);\r\n\r\n  const handleStartNow = () => {\r\n    const now = new Date();\r\n    setStartTime(now.toISOString());\r\n    setShowPopup(false);\r\n    recommendRoute(now.toISOString());\r\n  };\r\n\r\n  const handleStartLater = () => {\r\n    if (!customDate) {\r\n      alert(\"Please select a date & time.\");\r\n      return;\r\n    }\r\n    setStartTime(customDate);\r\n    setShowPopup(false);\r\n    recommendRoute(customDate);\r\n  };\r\n\r\n  const openPopup = () => {\r\n    setShowPopup(true);\r\n  };\r\n\r\n  const recommendRoute = (start) => {\r\n    if (!user || !user.preferences || user.preferences.length === 0) {\r\n      alert(\"Set your preferences first in profile.\");\r\n      return;\r\n    }\r\n\r\n    // Convert preferences to lowercase\r\n    const prefs = user.preferences.map((p) => p.toLowerCase());\r\n\r\n    // Filter POIs based on tags (comma separated)\r\n    const filtered = pois.filter((poi) => {\r\n      const poiTags = poi.tags\r\n        ? poi.tags.toLowerCase().split(\",\").map((t) => t.trim())\r\n        : [];\r\n      return prefs.some((pref) => poiTags.includes(pref));\r\n    });\r\n\r\n    // Take the first 4 matched POIs\r\n    const selected = filtered.slice(0, 4);\r\n\r\n    if (selected.length === 0) {\r\n      alert(\"No POIs match your preferences.\");\r\n      return;\r\n    }\r\n\r\n    // Navigate to route details with selected POIs & start time\r\n    navigate(\"/routedetails\", { state: { itinerary: selected, startTime: start } });\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: \"center\", marginTop: 40 }}>\r\n      <button\r\n        onClick={openPopup}\r\n        style={{\r\n          padding: \"12px 24px\",\r\n          background: \"#2196f3\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: 8,\r\n          fontSize: 16,\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        Plan My Route\r\n      </button>\r\n\r\n      {showPopup && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            background: \"rgba(0,0,0,0.6)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            zIndex: 9999,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              background: \"#fff\",\r\n              padding: 20,\r\n              borderRadius: 10,\r\n              width: 300,\r\n              textAlign: \"center\",\r\n              zIndex: 10000,\r\n            }}\r\n          >\r\n            <h3>When do you want to start?</h3>\r\n            <button\r\n              onClick={handleStartNow}\r\n              style={{\r\n                margin: \"10px\",\r\n                padding: \"10px 20px\",\r\n                background: \"#4caf50\",\r\n                color: \"white\",\r\n                border: \"none\",\r\n                borderRadius: 5,\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              Start Now\r\n            </button>\r\n            <div style={{ margin: \"10px 0\" }}>\r\n              <input\r\n                type=\"datetime-local\"\r\n                value={customDate}\r\n                onChange={(e) => setCustomDate(e.target.value)}\r\n                style={{ width: \"100%\", padding: \"5px\" }}\r\n              />\r\n            </div>\r\n            <button\r\n              onClick={handleStartLater}\r\n              style={{\r\n                margin: \"10px\",\r\n                padding: \"10px 20px\",\r\n                background: \"#2196f3\",\r\n                color: \"white\",\r\n                border: \"none\",\r\n                borderRadius: 5,\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              Start Later\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,eAAe,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACrC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACe,UAAU,EAAEC,aAAa,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAEhD,MAAMiB,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd;IACA,MAAMiB,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IAC3DZ,OAAO,CAACQ,UAAU,CAAC;;IAEnB;IACAK,KAAK,CAAC,gCAAgC,CAAC,CACpCC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAKnB,OAAO,CAACmB,IAAI,CAAC,CAAC,CAC7BC,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEF,GAAG,CAAC;MAC1CrB,OAAO,CAAC,EAAE,CAAC;IACb,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMwB,cAAc,GAAGA,CAAA,KAAM;IAC3B,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;IACtBtB,YAAY,CAACqB,GAAG,CAACE,WAAW,CAAC,CAAC,CAAC;IAC/BrB,YAAY,CAAC,KAAK,CAAC;IACnBsB,cAAc,CAACH,GAAG,CAACE,WAAW,CAAC,CAAC,CAAC;EACnC,CAAC;EAED,MAAME,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAI,CAACtB,UAAU,EAAE;MACfuB,KAAK,CAAC,8BAA8B,CAAC;MACrC;IACF;IACA1B,YAAY,CAACG,UAAU,CAAC;IACxBD,YAAY,CAAC,KAAK,CAAC;IACnBsB,cAAc,CAACrB,UAAU,CAAC;EAC5B,CAAC;EAED,MAAMwB,SAAS,GAAGA,CAAA,KAAM;IACtBzB,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;EAED,MAAMsB,cAAc,GAAII,KAAK,IAAK;IAChC,IAAI,CAAC/B,IAAI,IAAI,CAACA,IAAI,CAACgC,WAAW,IAAIhC,IAAI,CAACgC,WAAW,CAACC,MAAM,KAAK,CAAC,EAAE;MAC/DJ,KAAK,CAAC,wCAAwC,CAAC;MAC/C;IACF;;IAEA;IACA,MAAMK,KAAK,GAAGlC,IAAI,CAACgC,WAAW,CAACG,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;;IAE1D;IACA,MAAMC,QAAQ,GAAGxC,IAAI,CAACyC,MAAM,CAAEC,GAAG,IAAK;MACpC,MAAMC,OAAO,GAAGD,GAAG,CAACE,IAAI,GACpBF,GAAG,CAACE,IAAI,CAACL,WAAW,CAAC,CAAC,CAACM,KAAK,CAAC,GAAG,CAAC,CAACR,GAAG,CAAES,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,GACtD,EAAE;MACN,OAAOX,KAAK,CAACY,IAAI,CAAEC,IAAI,IAAKN,OAAO,CAACO,QAAQ,CAACD,IAAI,CAAC,CAAC;IACrD,CAAC,CAAC;;IAEF;IACA,MAAME,QAAQ,GAAGX,QAAQ,CAACY,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAErC,IAAID,QAAQ,CAAChB,MAAM,KAAK,CAAC,EAAE;MACzBJ,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;;IAEA;IACArB,QAAQ,CAAC,eAAe,EAAE;MAAE2C,KAAK,EAAE;QAAEC,SAAS,EAAEH,QAAQ;QAAE/C,SAAS,EAAE6B;MAAM;IAAE,CAAC,CAAC;EACjF,CAAC;EAED,oBACEpC,OAAA;IAAK0D,KAAK,EAAE;MAAEC,SAAS,EAAE,QAAQ;MAAEC,SAAS,EAAE;IAAG,CAAE;IAAAC,QAAA,gBACjD7D,OAAA;MACE8D,OAAO,EAAE3B,SAAU;MACnBuB,KAAK,EAAE;QACLK,OAAO,EAAE,WAAW;QACpBC,UAAU,EAAE,SAAS;QACrBC,KAAK,EAAE,MAAM;QACbC,MAAM,EAAE,MAAM;QACdC,YAAY,EAAE,CAAC;QACfC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE;MACV,CAAE;MAAAR,QAAA,EACH;IAED;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAERhE,SAAS,iBACRT,OAAA;MACE0D,KAAK,EAAE;QACLgB,QAAQ,EAAE,OAAO;QACjBC,GAAG,EAAE,CAAC;QACNC,IAAI,EAAE,CAAC;QACPC,KAAK,EAAE,MAAM;QACbC,MAAM,EAAE,MAAM;QACdd,UAAU,EAAE,iBAAiB;QAC7Be,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBC,cAAc,EAAE,QAAQ;QACxBC,MAAM,EAAE;MACV,CAAE;MAAArB,QAAA,eAEF7D,OAAA;QACE0D,KAAK,EAAE;UACLM,UAAU,EAAE,MAAM;UAClBD,OAAO,EAAE,EAAE;UACXI,YAAY,EAAE,EAAE;UAChBU,KAAK,EAAE,GAAG;UACVlB,SAAS,EAAE,QAAQ;UACnBuB,MAAM,EAAE;QACV,CAAE;QAAArB,QAAA,gBAEF7D,OAAA;UAAA6D,QAAA,EAAI;QAA0B;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACnCzE,OAAA;UACE8D,OAAO,EAAElC,cAAe;UACxB8B,KAAK,EAAE;YACLyB,MAAM,EAAE,MAAM;YACdpB,OAAO,EAAE,WAAW;YACpBC,UAAU,EAAE,SAAS;YACrBC,KAAK,EAAE,OAAO;YACdC,MAAM,EAAE,MAAM;YACdC,YAAY,EAAE,CAAC;YACfE,MAAM,EAAE;UACV,CAAE;UAAAR,QAAA,EACH;QAED;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTzE,OAAA;UAAK0D,KAAK,EAAE;YAAEyB,MAAM,EAAE;UAAS,CAAE;UAAAtB,QAAA,eAC/B7D,OAAA;YACEoF,IAAI,EAAC,gBAAgB;YACrBC,KAAK,EAAE1E,UAAW;YAClB2E,QAAQ,EAAGC,CAAC,IAAK3E,aAAa,CAAC2E,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAC/C3B,KAAK,EAAE;cAAEmB,KAAK,EAAE,MAAM;cAAEd,OAAO,EAAE;YAAM;UAAE;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1C;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACNzE,OAAA;UACE8D,OAAO,EAAE7B,gBAAiB;UAC1ByB,KAAK,EAAE;YACLyB,MAAM,EAAE,MAAM;YACdpB,OAAO,EAAE,WAAW;YACpBC,UAAU,EAAE,SAAS;YACrBC,KAAK,EAAE,OAAO;YACdC,MAAM,EAAE,MAAM;YACdC,YAAY,EAAE,CAAC;YACfE,MAAM,EAAE;UACV,CAAE;UAAAR,QAAA,EACH;QAED;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACvE,EAAA,CA9JuBD,YAAY;EAAA,QAOjBH,WAAW;AAAA;AAAA2F,EAAA,GAPNxF,YAAY;AAAA,IAAAwF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}